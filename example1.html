<!doctype html>
<html lang=en>
    <head>
        <meta charset=utf-8>
        <title>Pretty Python</title>
        <style>
            pre {font-size: 16pt}
            .variable {color: black}
            .comment {color: green}
            .keyword {color: blue}
            .string {color: orange}
            .number {color: red}
            .operator {color: purple}
        </style>
    </head>
    <body>
        <h1>Python code inspector</h1>
        <ul>
            <li><a href="#stats">Statistics</a></li>
            <li><a href="#code">Code</a></li>
        </ul>
           <div id="stats">
               <h2>Statistics</h2>
               <ul>
               <li>Number of lines = 658</li>
               <li>Maximum line length = 72</li>
               <li>Maximum variable length = 21</li>
               <li>Minumum variable length = 1</li>
               <li>Number of comments = 52</li>
               <li>Number of definitions = 12</li>
               <li>Number of strings = 61</li>
               <li>Number of numbers = 499</li>
               <li>Number of repeated contants = 392</li>
           </ul>
           </div>
           <div id="code">
               <h2>Python code</h2>
               <pre><code>
<span id="line1">1</span>         <span class="string">&#x27;&#x27;&#x27;</span>
<span id="line2">2</span>         <span class="string">Edge detection.</span>
<span id="line3">3</span>         <span class="string"></span>
<span id="line4">4</span>         <span class="string">Author: Bernie Pope (bjpope@unimelb.edu.au).</span>
<span id="line5">5</span>         <span class="string"></span>
<span id="line6">6</span>         <span class="string">This program implements the Sobel edge detection algorithm. The input</span>
<span id="line7">7</span>         <span class="string">is a computer graphics image and the output is an edge image.</span>
<span id="line8">8</span>         <span class="string">It can read and write standard image formats such as PNG and JPEG. </span>
<span id="line9">9</span>         <span class="string">The output edge image has the same dimensions as the input image.</span>
<span id="line10">10</span>        <span class="string">White pixels with intensity 255 indicate edges in the input image.</span>
<span id="line11">11</span>        <span class="string">Black pixels with intensity 0 indicate non-edges in the input image.</span>
<span id="line12">12</span>        <span class="string">Each image coordinate in the input image is assigned an edge score</span>
<span id="line13">13</span>        <span class="string">according to the output of the Sobel filter. A threshold parameter</span>
<span id="line14">14</span>        <span class="string">is used to determine the edge response. Edge scores above the threshold</span>
<span id="line15">15</span>        <span class="string">are turned into white pixels; everything else is turned into </span>
<span id="line16">16</span>        <span class="string">black pixels.</span>
<span id="line17">17</span>        <span class="string"></span>
<span id="line18">18</span>        <span class="string">The minimum edge score is 0, the maximum edge score is roughly 1140.</span>
<span id="line19">19</span>        <span class="string"></span>
<span id="line20">20</span>        <span class="string">Images are represented as lists of lists of integers. Each integer</span>
<span id="line21">21</span>        <span class="string">P in an image represents a single (greyscale) pixel intensity in the</span>
<span id="line22">22</span>        <span class="string">range 0 &lt;= P &lt;= 255, where 0 appears absolutely black, 255 appears</span>
<span id="line23">23</span>        <span class="string">bright white, and everything in between is a shade of grey. Image</span>
<span id="line24">24</span>        <span class="string">coordinates are zero-based and are written as (row, column) pairs. </span>
<span id="line25">25</span>        <span class="string">In an image with R rows and C columns the top-left pixel of the image is</span>
<span id="line26">26</span>        <span class="string">at (0, 0) and the bottom right pixel of the image is at (R - 1, C - 1).</span>
<span id="line27">27</span>        <span class="string">Images are stored in row major order, which means that the innermost lists</span>
<span id="line28">28</span>        <span class="string">represent rows of pixels. We assume that images are rectangular, implying</span>
<span id="line29">29</span>        <span class="string">that all rows have the same length. </span>
<span id="line30">30</span>        <span class="string"></span>
<span id="line31">31</span>        <span class="string">Colour images are supported as input. They are automatically converted</span>
<span id="line32">32</span>        <span class="string">to greyscale before computing the edges.</span>
<span id="line33">33</span>        <span class="string"></span>
<span id="line34">34</span>        <span class="string">Empty images (with zero pixels) are not supported.</span>
<span id="line35">35</span>        <span class="string"></span>
<span id="line36">36</span>        <span class="string">The program does no error checking.</span>
<span id="line37">37</span>        <span class="string"></span>
<span id="line38">38</span>        <span class="string">Example Usage:</span>
<span id="line39">39</span>        <span class="string"></span>
<span id="line40">40</span>        <span class="string">    edge_detect(&#x27;input_file.png&#x27;, &#x27;edge_image_output.png&#x27;, 200)</span>
<span id="line41">41</span>        <span class="string"></span>
<span id="line42">42</span>        <span class="string">This will read the file called input_file.png, detect edges with</span>
<span id="line43">43</span>        <span class="string">edge score above 200, and write the resulting edge image to</span>
<span id="line44">44</span>        <span class="string">edge_image_output.png.</span>
<span id="line45">45</span>        <span class="string"></span>
<span id="line46">46</span>        <span class="string">Testing:</span>
<span id="line47">47</span>        <span class="string"></span>
<span id="line48">48</span>        <span class="string">    run_tests()</span>
<span id="line49">49</span>        <span class="string"></span>
<span id="line50">50</span>        <span class="string">This will run various unit tests on various parts of the program</span>
<span id="line51">51</span>        <span class="string">and check the output for correctness.</span>
<span id="line52">52</span>        <span class="string"></span>
<span id="line53">53</span>        <span class="string">Revision history:</span>
<span id="line54">54</span>        <span class="string"></span>
<span id="line55">55</span>        <span class="string">3  Jun 2014: Implemented row and column gradient calculations.</span>
<span id="line56">56</span>        <span class="string">4  Jun 2014: Implemented gradient magnitude and threshold as one function.</span>
<span id="line57">57</span>        <span class="string">9  Jun 2014: Split gradient magnitude and threshold into two functions, and</span>
<span id="line58">58</span>        <span class="string">             added CHECKER test case.</span>
<span id="line59">59</span>        <span class="string">18 Jun 2014: Initial version of image convolution.</span>
<span id="line60">60</span>        <span class="string">25 Jun 2014: Modified image convolution to avoid mutating input image. </span>
<span id="line61">61</span>        <span class="string">5  Jul 2014: Added test cases.</span>
<span id="line62">62</span>        <span class="string">19 Jul 2014: Comments added.</span>
<span id="line63">63</span>        <span class="string">&#x27;&#x27;&#x27;</span>
<span id="line64">64</span>        
<span id="line65">65</span>        <span class="keyword">from</span> <span class="variable">SimpleImage</span> <span class="keyword">import</span> <span class="operator">(</span><span class="variable">get_height</span><span class="operator">,</span> <span class="variable">get_width</span><span class="operator">,</span> <span class="variable">read_image</span><span class="operator">,</span> <span class="variable">write_image</span><span class="operator">)</span>
<span id="line66">66</span>        <span class="keyword">import</span> <span class="variable">math</span>
<span id="line67">67</span>        
<span id="line68">68</span>        <span class="comment"># Intensity of the most white pixel.</span>
<span id="line69">69</span>        <span class="variable">WHITE_PIXEL</span> <span class="operator">=</span> <span class="number">255</span>
<span id="line70">70</span>        <span class="comment"># Intensity of the most black pixel:</span>
<span id="line71">71</span>        <span class="variable">BLACK_PIXEL</span> <span class="operator">=</span> <span class="number">0</span>
<span id="line72">72</span>        
<span id="line73">73</span>        
<span id="line74">74</span>        <span class="keyword">def</span> <span class="variable">gradient_row</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span><span class="operator">,</span> <span class="variable">col</span><span class="operator">)</span><span class="operator">:</span>
<span id="line75">75</span>            <span class="string">&#x27;&#x27;&#x27;</span>
<span id="line76">76</span>        <span class="string">    Approximate the ROW GRADIENT in the image at (row, col).</span>
<span id="line77">77</span>        <span class="string"></span>
<span id="line78">78</span>        <span class="string">    The gradient is computed using the row kernel of the Sobel filter:</span>
<span id="line79">79</span>        <span class="string"></span>
<span id="line80">80</span>        <span class="string">        1    2    1</span>
<span id="line81">81</span>        <span class="string">        0    0    0</span>
<span id="line82">82</span>        <span class="string">       -1   -2   -1</span>
<span id="line83">83</span>        <span class="string"></span>
<span id="line84">84</span>        <span class="string">    The center of the above kernel is overlaid onto the image at</span>
<span id="line85">85</span>        <span class="string">    (row, col). Note that when the kernel overlaps the edge of</span>
<span id="line86">86</span>        <span class="string">    the image each missing pixel is replaced by its nearest in-bounds</span>
<span id="line87">87</span>        <span class="string">    neighbor.</span>
<span id="line88">88</span>        <span class="string"></span>
<span id="line89">89</span>        <span class="string">    The result is calculated as follows, for image I, row r, and </span>
<span id="line90">90</span>        <span class="string">    column c:</span>
<span id="line91">91</span>        <span class="string"></span>
<span id="line92">92</span>        <span class="string">    G_row(I, r, c) = I(r - 1, c - 1) + </span>
<span id="line93">93</span>        <span class="string">                     2 * I(r - 1, c) + </span>
<span id="line94">94</span>        <span class="string">                     I(r - 1, c + 1) - </span>
<span id="line95">95</span>        <span class="string">                     I(r + 1, c - 1) - </span>
<span id="line96">96</span>        <span class="string">                     2 * I(r + 1, c) - </span>
<span id="line97">97</span>        <span class="string">                     I(r + 1, c + 1) </span>
<span id="line98">98</span>        <span class="string"></span>
<span id="line99">99</span>        <span class="string">    Parameters:</span>
<span id="line100">100</span>       <span class="string"></span>
<span id="line101">101</span>       <span class="string">        image: a list of lists of pixel intensities.</span>
<span id="line102">102</span>       <span class="string">        row: an integer within the bounds of the image height.</span>
<span id="line103">103</span>       <span class="string">        col: an integer within the bounds of the image width.</span>
<span id="line104">104</span>       <span class="string"></span>
<span id="line105">105</span>       <span class="string">    Result:</span>
<span id="line106">106</span>       <span class="string"></span>
<span id="line107">107</span>       <span class="string">        An integer that is computed by G_row above.</span>
<span id="line108">108</span>       <span class="string"></span>
<span id="line109">109</span>       <span class="string">    Examples, using CHECKER image defined in this module:</span>
<span id="line110">110</span>       <span class="string"></span>
<span id="line111">111</span>       <span class="string">    &gt;&gt;&gt; gradient_row(CHECKER, 0, 0)</span>
<span id="line112">112</span>       <span class="string">    -37</span>
<span id="line113">113</span>       <span class="string">    &gt;&gt;&gt; gradient_row(CHECKER, 5, 2)</span>
<span id="line114">114</span>       <span class="string">    -885</span>
<span id="line115">115</span>       <span class="string">    &gt;&gt;&gt; gradient_row(CHECKER, 7, 5)</span>
<span id="line116">116</span>       <span class="string">    23</span>
<span id="line117">117</span>       <span class="string">    &gt;&gt;&gt; gradient_row(CHECKER, 9, 0)</span>
<span id="line118">118</span>       <span class="string">    -47  </span>
<span id="line119">119</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line120">120</span>           <span class="comment"># Note that get_pixel finds the nearest in-bounds</span>
<span id="line121">121</span>           <span class="comment"># pixel in situations where (row, col) falls outside</span>
<span id="line122">122</span>           <span class="comment"># the image bounds. Otherwise it finds the pixel</span>
<span id="line123">123</span>           <span class="comment"># within the image at the desired coordinates.</span>
<span id="line124">124</span>           <span class="keyword">return</span> <span class="variable">get_pixel</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span> <span class="operator">-</span> <span class="number">1</span><span class="operator">,</span> <span class="variable">col</span> <span class="operator">-</span> <span class="number">1</span><span class="operator">)</span> <span class="operator">+</span> \
<span id="line125">125</span>                  <span class="number">2</span> <span class="operator">*</span> <span class="variable">get_pixel</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span> <span class="operator">-</span> <span class="number">1</span><span class="operator">,</span> <span class="variable">col</span><span class="operator">)</span> <span class="operator">+</span> \
<span id="line126">126</span>                  <span class="variable">get_pixel</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span> <span class="operator">-</span> <span class="number">1</span><span class="operator">,</span> <span class="variable">col</span> <span class="operator">+</span> <span class="number">1</span><span class="operator">)</span> <span class="operator">-</span> \
<span id="line127">127</span>                  <span class="variable">get_pixel</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span> <span class="operator">+</span> <span class="number">1</span><span class="operator">,</span> <span class="variable">col</span> <span class="operator">-</span> <span class="number">1</span><span class="operator">)</span> <span class="operator">-</span> \
<span id="line128">128</span>                  <span class="number">2</span> <span class="operator">*</span> <span class="variable">get_pixel</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span> <span class="operator">+</span> <span class="number">1</span><span class="operator">,</span> <span class="variable">col</span><span class="operator">)</span> <span class="operator">-</span> \
<span id="line129">129</span>                  <span class="variable">get_pixel</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span> <span class="operator">+</span> <span class="number">1</span><span class="operator">,</span> <span class="variable">col</span> <span class="operator">+</span> <span class="number">1</span><span class="operator">)</span>
<span id="line130">130</span>       
<span id="line131">131</span>       
<span id="line132">132</span>       <span class="keyword">def</span> <span class="variable">gradient_col</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span><span class="operator">,</span> <span class="variable">col</span><span class="operator">)</span><span class="operator">:</span>
<span id="line133">133</span>           <span class="string">&#x27;&#x27;&#x27;</span>
<span id="line134">134</span>       <span class="string">    Approximate the COLUMN GRADIENT in the image at (row, col).</span>
<span id="line135">135</span>       <span class="string"></span>
<span id="line136">136</span>       <span class="string">    The gradient is computed using the column kernel of the Sobel filter:</span>
<span id="line137">137</span>       <span class="string"></span>
<span id="line138">138</span>       <span class="string">       -1    0    1</span>
<span id="line139">139</span>       <span class="string">       -2    0    2</span>
<span id="line140">140</span>       <span class="string">       -1    0    1</span>
<span id="line141">141</span>       <span class="string"></span>
<span id="line142">142</span>       <span class="string">    The center of the above kernel is overlaid onto the image at</span>
<span id="line143">143</span>       <span class="string">    (row, col). Note that when the kernel overlaps the edge of</span>
<span id="line144">144</span>       <span class="string">    the image each missing pixel is replaced by its nearest in-bounds</span>
<span id="line145">145</span>       <span class="string">    neighbor.</span>
<span id="line146">146</span>       <span class="string"></span>
<span id="line147">147</span>       <span class="string">    The result is calculated as follows, for image I, row r, and </span>
<span id="line148">148</span>       <span class="string">    column c:</span>
<span id="line149">149</span>       <span class="string"></span>
<span id="line150">150</span>       <span class="string">    G_col(I, r, c) = I(r - 1, c + 1) +</span>
<span id="line151">151</span>       <span class="string">                     2 * I(r, c + 1) +</span>
<span id="line152">152</span>       <span class="string">                     I(r + 1, c + 1) -</span>
<span id="line153">153</span>       <span class="string">                     I(r - 1, c - 1) -</span>
<span id="line154">154</span>       <span class="string">                     2 * I(r, c - 1) -</span>
<span id="line155">155</span>       <span class="string">                     I(r + 1, c - 1) </span>
<span id="line156">156</span>       <span class="string"></span>
<span id="line157">157</span>       <span class="string">    Parameters:</span>
<span id="line158">158</span>       <span class="string"></span>
<span id="line159">159</span>       <span class="string">        image: a list of lists of pixel intensities.</span>
<span id="line160">160</span>       <span class="string">        row: an integer within the bounds of the image height.</span>
<span id="line161">161</span>       <span class="string">        col: an integer within the bounds of the image width.</span>
<span id="line162">162</span>       <span class="string"></span>
<span id="line163">163</span>       <span class="string">    Result:</span>
<span id="line164">164</span>       <span class="string"></span>
<span id="line165">165</span>       <span class="string">        An integer that is computed by G_col above.</span>
<span id="line166">166</span>       <span class="string"></span>
<span id="line167">167</span>       <span class="string">    Examples, using CHECKER image defined in this module:</span>
<span id="line168">168</span>       <span class="string"></span>
<span id="line169">169</span>       <span class="string">    &gt;&gt;&gt; gradient_col(CHECKER, 0, 0)</span>
<span id="line170">170</span>       <span class="string">    -27</span>
<span id="line171">171</span>       <span class="string">    &gt;&gt;&gt; gradient_col(CHECKER, 5, 2)</span>
<span id="line172">172</span>       <span class="string">    31</span>
<span id="line173">173</span>       <span class="string">    &gt;&gt;&gt; gradient_col(CHECKER, 7, 5)</span>
<span id="line174">174</span>       <span class="string">    -825</span>
<span id="line175">175</span>       <span class="string">    &gt;&gt;&gt; gradient_col(CHECKER, 9, 0)</span>
<span id="line176">176</span>       <span class="string">    45</span>
<span id="line177">177</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line178">178</span>           <span class="comment"># Note that get_pixel finds the nearest in-bounds</span>
<span id="line179">179</span>           <span class="comment"># pixel in situations where (row, col) falls outside</span>
<span id="line180">180</span>           <span class="comment"># the image bounds. Otherwise it finds the pixel</span>
<span id="line181">181</span>           <span class="comment"># within the image at the desired coordinates.</span>
<span id="line182">182</span>           <span class="keyword">return</span> <span class="variable">get_pixel</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span> <span class="operator">-</span> <span class="number">1</span><span class="operator">,</span> <span class="variable">col</span> <span class="operator">+</span> <span class="number">1</span><span class="operator">)</span> <span class="operator">+</span> \
<span id="line183">183</span>                  <span class="number">2</span> <span class="operator">*</span> <span class="variable">get_pixel</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span><span class="operator">,</span> <span class="variable">col</span> <span class="operator">+</span> <span class="number">1</span><span class="operator">)</span> <span class="operator">+</span> \
<span id="line184">184</span>                  <span class="variable">get_pixel</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span> <span class="operator">+</span> <span class="number">1</span><span class="operator">,</span> <span class="variable">col</span> <span class="operator">+</span> <span class="number">1</span><span class="operator">)</span> <span class="operator">-</span> \
<span id="line185">185</span>                  <span class="variable">get_pixel</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span> <span class="operator">-</span> <span class="number">1</span><span class="operator">,</span> <span class="variable">col</span> <span class="operator">-</span> <span class="number">1</span><span class="operator">)</span> <span class="operator">-</span> \
<span id="line186">186</span>                  <span class="number">2</span> <span class="operator">*</span> <span class="variable">get_pixel</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span><span class="operator">,</span> <span class="variable">col</span> <span class="operator">-</span> <span class="number">1</span><span class="operator">)</span> <span class="operator">-</span> \
<span id="line187">187</span>                  <span class="variable">get_pixel</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span> <span class="operator">+</span> <span class="number">1</span><span class="operator">,</span> <span class="variable">col</span> <span class="operator">-</span> <span class="number">1</span><span class="operator">)</span>
<span id="line188">188</span>       
<span id="line189">189</span>       
<span id="line190">190</span>       <span class="keyword">def</span> <span class="variable">gradient_magnitude</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span><span class="operator">,</span> <span class="variable">col</span><span class="operator">)</span><span class="operator">:</span>
<span id="line191">191</span>           <span class="string">&#x27;&#x27;&#x27;</span>
<span id="line192">192</span>       <span class="string">    Approximate the magnitude of the steepest GRADIENT in the image</span>
<span id="line193">193</span>       <span class="string">    at (row, col).</span>
<span id="line194">194</span>       <span class="string"></span>
<span id="line195">195</span>       <span class="string">    The result is computed by combining the gradient row and gradient</span>
<span id="line196">196</span>       <span class="string">    column as follows, for image I, row r, and column c:</span>
<span id="line197">197</span>       <span class="string"></span>
<span id="line198">198</span>       <span class="string">    G_mag(I, r, c) = sqrt(G_col(I, r, c) ** 2 + G_row(I, r, c) ** 2)</span>
<span id="line199">199</span>       <span class="string"></span>
<span id="line200">200</span>       <span class="string">    That is, we treat the gradient row and gradient column as vectors</span>
<span id="line201">201</span>       <span class="string">    in their respective directions. The steepest gradient is then</span>
<span id="line202">202</span>       <span class="string">    taken to be the magnitude of the vector resulting from adding</span>
<span id="line203">203</span>       <span class="string">    the gradient row and gradient column together.</span>
<span id="line204">204</span>       <span class="string"></span>
<span id="line205">205</span>       <span class="string">    The value of the magnitude is overestimated by a factor of 8,</span>
<span id="line206">206</span>       <span class="string">    but we ignore this fact by treating its value as an edge</span>
<span id="line207">207</span>       <span class="string">    score. The higher the score the more certain we are of the</span>
<span id="line208">208</span>       <span class="string">    presence of an edge in the image.</span>
<span id="line209">209</span>       <span class="string"></span>
<span id="line210">210</span>       <span class="string">    Parameters:</span>
<span id="line211">211</span>       <span class="string"></span>
<span id="line212">212</span>       <span class="string">        image: a list of lists of pixel intensities.</span>
<span id="line213">213</span>       <span class="string">        row: an integer within the bounds of the image height.</span>
<span id="line214">214</span>       <span class="string">        col: an integer within the bounds of the image width.</span>
<span id="line215">215</span>       <span class="string"></span>
<span id="line216">216</span>       <span class="string">    Result:</span>
<span id="line217">217</span>       <span class="string"></span>
<span id="line218">218</span>       <span class="string">        An float that is computed by G_mag above.</span>
<span id="line219">219</span>       <span class="string"></span>
<span id="line220">220</span>       <span class="string">    Examples, using CHECKER image defined in this module:</span>
<span id="line221">221</span>       <span class="string"></span>
<span id="line222">222</span>       <span class="string">    &gt;&gt;&gt; gradient_magnitude(CHECKER, 0, 0)</span>
<span id="line223">223</span>       <span class="string">    45.803929962395145</span>
<span id="line224">224</span>       <span class="string">    &gt;&gt;&gt; gradient_magnitude(CHECKER, 5, 2)</span>
<span id="line225">225</span>       <span class="string">    885.5427714119742</span>
<span id="line226">226</span>       <span class="string">    &gt;&gt;&gt; gradient_magnitude(CHECKER, 7, 5)</span>
<span id="line227">227</span>       <span class="string">    825.3205437888967</span>
<span id="line228">228</span>       <span class="string">    &gt;&gt;&gt; gradient_magnitude(CHECKER, 9, 0)</span>
<span id="line229">229</span>       <span class="string">    65.06919393998976</span>
<span id="line230">230</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line231">231</span>           <span class="variable">grad_row</span> <span class="operator">=</span> <span class="variable">gradient_row</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span><span class="operator">,</span> <span class="variable">col</span><span class="operator">)</span>
<span id="line232">232</span>           <span class="variable">grad_col</span> <span class="operator">=</span> <span class="variable">gradient_col</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span><span class="operator">,</span> <span class="variable">col</span><span class="operator">)</span>
<span id="line233">233</span>           <span class="keyword">return</span> <span class="variable">math</span><span class="operator">.</span><span class="variable">sqrt</span><span class="operator">(</span><span class="variable">grad_row</span> <span class="operator">**</span> <span class="number">2</span> <span class="operator">+</span> <span class="variable">grad_col</span> <span class="operator">**</span> <span class="number">2</span><span class="operator">)</span>
<span id="line234">234</span>       
<span id="line235">235</span>       
<span id="line236">236</span>       <span class="keyword">def</span> <span class="variable">gradient_threshold</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span><span class="operator">,</span> <span class="variable">col</span><span class="operator">,</span> <span class="variable">threshold</span><span class="operator">)</span><span class="operator">:</span>
<span id="line237">237</span>           <span class="string">&#x27;&#x27;&#x27;</span>
<span id="line238">238</span>       <span class="string">    Compute the edge pixel intensity for the image at (row, col).</span>
<span id="line239">239</span>       <span class="string"></span>
<span id="line240">240</span>       <span class="string">    The result is computed by comparing the gradient magnitude</span>
<span id="line241">241</span>       <span class="string">    at the coordinate against the threshold parameter. If the</span>
<span id="line242">242</span>       <span class="string">    gradient magnitude is GREATER THAN the threshold then the result</span>
<span id="line243">243</span>       <span class="string">    edge pixel is WHITE, otherwise it is BLACK.</span>
<span id="line244">244</span>       <span class="string"></span>
<span id="line245">245</span>       <span class="string">    Parameters:</span>
<span id="line246">246</span>       <span class="string"></span>
<span id="line247">247</span>       <span class="string">        image: a list of lists of pixel intensities.</span>
<span id="line248">248</span>       <span class="string">        row: an integer within the bounds of the image height.</span>
<span id="line249">249</span>       <span class="string">        col: an integer within the bounds of the image width.</span>
<span id="line250">250</span>       <span class="string">        threshold: an integer or a float indicating the edge score</span>
<span id="line251">251</span>       <span class="string">        above which an edge is detected.</span>
<span id="line252">252</span>       <span class="string"></span>
<span id="line253">253</span>       <span class="string">    Note: using the 3*3 Sobel filter, the gradient magnitude will not</span>
<span id="line254">254</span>       <span class="string">    exceed 1141, so there is no point providing a threshold value</span>
<span id="line255">255</span>       <span class="string">    higher than that. The minimum gradient magnitude will not be</span>
<span id="line256">256</span>       <span class="string">    less than 0. However, if you want to treat 0 as an edge then</span>
<span id="line257">257</span>       <span class="string">    the threshold will have to be -1. It makes no sense to provide</span>
<span id="line258">258</span>       <span class="string">    a threshold less than -1.</span>
<span id="line259">259</span>       <span class="string"></span>
<span id="line260">260</span>       <span class="string">    Result:</span>
<span id="line261">261</span>       <span class="string"></span>
<span id="line262">262</span>       <span class="string">        An integer edge pixel intensity which is either absolutely</span>
<span id="line263">263</span>       <span class="string">        BLACK or absolutely WHITE.</span>
<span id="line264">264</span>       <span class="string"></span>
<span id="line265">265</span>       <span class="string">    Examples, using CHECKER image defined in this module:</span>
<span id="line266">266</span>       <span class="string"></span>
<span id="line267">267</span>       <span class="string">    &gt;&gt;&gt; gradient_threshold(CHECKER, 0, 0, 0)</span>
<span id="line268">268</span>       <span class="string">    255</span>
<span id="line269">269</span>       <span class="string">    &gt;&gt;&gt; gradient_threshold(CHECKER, 0, 0, 50)</span>
<span id="line270">270</span>       <span class="string">    0</span>
<span id="line271">271</span>       <span class="string">    &gt;&gt;&gt; gradient_threshold(CHECKER, 5, 2, 200)</span>
<span id="line272">272</span>       <span class="string">    255</span>
<span id="line273">273</span>       <span class="string">    &gt;&gt;&gt; gradient_threshold(CHECKER, 7, 5, 900)</span>
<span id="line274">274</span>       <span class="string">    0</span>
<span id="line275">275</span>       <span class="string">    &gt;&gt;&gt; gradient_threshold(CHECKER, 9, 0, 100)</span>
<span id="line276">276</span>       <span class="string">    0</span>
<span id="line277">277</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line278">278</span>           <span class="variable">grad_mag</span> <span class="operator">=</span> <span class="variable">gradient_magnitude</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span><span class="operator">,</span> <span class="variable">col</span><span class="operator">)</span>
<span id="line279">279</span>           <span class="keyword">if</span> <span class="variable">grad_mag</span> <span class="operator">&gt;</span> <span class="variable">threshold</span><span class="operator">:</span>
<span id="line280">280</span>               <span class="keyword">return</span> <span class="variable">WHITE_PIXEL</span> 
<span id="line281">281</span>           <span class="keyword">else</span><span class="operator">:</span>
<span id="line282">282</span>               <span class="keyword">return</span> <span class="variable">BLACK_PIXEL</span>
<span id="line283">283</span>       
<span id="line284">284</span>       
<span id="line285">285</span>       <span class="keyword">def</span> <span class="variable">convolute</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">threshold</span><span class="operator">)</span><span class="operator">:</span>
<span id="line286">286</span>           <span class="string">&#x27;&#x27;&#x27;</span>
<span id="line287">287</span>       <span class="string">    Compute an edge image by convolving the Sobel filter over</span>
<span id="line288">288</span>       <span class="string">    the entire input image, for the given threshold. That is,</span>
<span id="line289">289</span>       <span class="string">    we apply the gradient_threshold function at each input image</span>
<span id="line290">290</span>       <span class="string">    coordinate, computing a new BLACK and WHITE edge image as</span>
<span id="line291">291</span>       <span class="string">    a result. The output image has the same coordinates as the</span>
<span id="line292">292</span>       <span class="string">    input image.</span>
<span id="line293">293</span>       <span class="string"></span>
<span id="line294">294</span>       <span class="string">    Parameters:</span>
<span id="line295">295</span>       <span class="string"></span>
<span id="line296">296</span>       <span class="string">        image: a list of lists of pixel intensities.</span>
<span id="line297">297</span>       <span class="string">        threshold: an integer or a float indicating the edge score</span>
<span id="line298">298</span>       <span class="string">        above which an edge is detected.</span>
<span id="line299">299</span>       <span class="string"></span>
<span id="line300">300</span>       <span class="string">    Note: using the 3*3 Sobel filter, the gradient magnitude will not</span>
<span id="line301">301</span>       <span class="string">    exceed 1141, so there is no point providing a threshold value</span>
<span id="line302">302</span>       <span class="string">    higher than that. The minimum gradient magnitude will not be</span>
<span id="line303">303</span>       <span class="string">    less than 0. However, if you want to treat 0 as an edge then</span>
<span id="line304">304</span>       <span class="string">    the threshold will have to be -1. It makes no sense to provide</span>
<span id="line305">305</span>       <span class="string">    a threshold less than -1.</span>
<span id="line306">306</span>       <span class="string"></span>
<span id="line307">307</span>       <span class="string">    The input image is not mutated.</span>
<span id="line308">308</span>       <span class="string"></span>
<span id="line309">309</span>       <span class="string">    Result:</span>
<span id="line310">310</span>       <span class="string"></span>
<span id="line311">311</span>       <span class="string">        An edge image consisting of absolutely BLACK or </span>
<span id="line312">312</span>       <span class="string">        absolutely WHITE pixels. WHITE pixels indicate the presence</span>
<span id="line313">313</span>       <span class="string">        of an edge (above the threshold) in the same coordinate</span>
<span id="line314">314</span>       <span class="string">        in the input image.</span>
<span id="line315">315</span>       <span class="string"></span>
<span id="line316">316</span>       <span class="string">    Example, using CHECKER image defined in this module:</span>
<span id="line317">317</span>       <span class="string"></span>
<span id="line318">318</span>       <span class="string">    &gt;&gt;&gt; convolute(CHECKER, 200)</span>
<span id="line319">319</span>       <span class="string">    [[0,   0,   0,   0,   255, 255, 0,   0,   0,   0  ],</span>
<span id="line320">320</span>       <span class="string">     [0,   0,   0,   0,   255, 255, 0,   0,   0,   0  ],</span>
<span id="line321">321</span>       <span class="string">     [0,   0,   0,   0,   255, 255, 0,   0,   0,   0  ],</span>
<span id="line322">322</span>       <span class="string">     [0,   0,   0,   0,   255, 255, 0,   0,   0,   0  ],</span>
<span id="line323">323</span>       <span class="string">     [255, 255, 255, 255, 255, 255, 255, 255, 255, 255],</span>
<span id="line324">324</span>       <span class="string">     [255, 255, 255, 255, 255, 255, 255, 255, 255, 255],</span>
<span id="line325">325</span>       <span class="string">     [0,   0,   0,   0,   255, 255, 0,   0,   0,   0  ],</span>
<span id="line326">326</span>       <span class="string">     [0,   0,   0,   0,   255, 255, 0,   0,   0,   0  ],</span>
<span id="line327">327</span>       <span class="string">     [0,   0,   0,   0,   255, 255, 0,   0,   0,   0  ],</span>
<span id="line328">328</span>       <span class="string">     [0,   0,   0,   0,   255, 255, 0,   0,   0,   0  ]]</span>
<span id="line329">329</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line330">330</span>           <span class="comment"># Compute the maximum dimensions of the input image.</span>
<span id="line331">331</span>           <span class="variable">num_rows</span> <span class="operator">=</span> <span class="variable">get_height</span><span class="operator">(</span><span class="variable">image</span><span class="operator">)</span>
<span id="line332">332</span>           <span class="variable">num_cols</span> <span class="operator">=</span> <span class="variable">get_width</span><span class="operator">(</span><span class="variable">image</span><span class="operator">)</span>
<span id="line333">333</span>           <span class="comment"># Iterate over the input image and build a new edge</span>
<span id="line334">334</span>           <span class="comment"># image as the result. Each pixel in the input image</span>
<span id="line335">335</span>           <span class="comment"># is turned into either a BLACK or WHITE pixel in the output.</span>
<span id="line336">336</span>           <span class="variable">new_image</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">]</span>
<span id="line337">337</span>           <span class="keyword">for</span> <span class="variable">row</span> <span class="keyword">in</span> <span class="variable">range</span><span class="operator">(</span><span class="variable">num_rows</span><span class="operator">)</span><span class="operator">:</span>
<span id="line338">338</span>               <span class="variable">new_row</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">]</span>
<span id="line339">339</span>               <span class="keyword">for</span> <span class="variable">col</span> <span class="keyword">in</span> <span class="variable">range</span><span class="operator">(</span><span class="variable">num_cols</span><span class="operator">)</span><span class="operator">:</span>
<span id="line340">340</span>                   <span class="comment"># Approximate the image gradient at this coordinate,</span>
<span id="line341">341</span>                   <span class="comment"># and compare it to the threshold.</span>
<span id="line342">342</span>                   <span class="variable">edge_pixel</span> <span class="operator">=</span> <span class="variable">gradient_threshold</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span><span class="operator">,</span> <span class="variable">col</span><span class="operator">,</span> <span class="variable">threshold</span><span class="operator">)</span>
<span id="line343">343</span>                   <span class="variable">new_row</span><span class="operator">.</span><span class="variable">append</span><span class="operator">(</span><span class="variable">edge_pixel</span><span class="operator">)</span>
<span id="line344">344</span>               <span class="variable">new_image</span><span class="operator">.</span><span class="variable">append</span><span class="operator">(</span><span class="variable">new_row</span><span class="operator">)</span>
<span id="line345">345</span>           <span class="keyword">return</span> <span class="variable">new_image</span>
<span id="line346">346</span>       
<span id="line347">347</span>       
<span id="line348">348</span>       <span class="keyword">def</span> <span class="variable">clamp</span><span class="operator">(</span><span class="variable">val</span><span class="operator">,</span> <span class="variable">lower_bound</span><span class="operator">,</span> <span class="variable">upper_bound</span><span class="operator">)</span><span class="operator">:</span>
<span id="line349">349</span>           <span class="string">&#x27;&#x27;&#x27;Restrict a value to be within the range:</span>
<span id="line350">350</span>       <span class="string"></span>
<span id="line351">351</span>       <span class="string">        lower_bound &lt;= val &lt;= upper_bound</span>
<span id="line352">352</span>       <span class="string"></span>
<span id="line353">353</span>       <span class="string">    Return val if it is within the range, otherwise</span>
<span id="line354">354</span>       <span class="string">    return the nearest bound to val.</span>
<span id="line355">355</span>       <span class="string"></span>
<span id="line356">356</span>       <span class="string">    We assume (but do not check) that</span>
<span id="line357">357</span>       <span class="string">    lower_bound &lt;= upper_bound. The function may</span>
<span id="line358">358</span>       <span class="string">    return the wrong result if this is not satisfied.</span>
<span id="line359">359</span>       <span class="string"></span>
<span id="line360">360</span>       <span class="string">    This function was provided in the project</span>
<span id="line361">361</span>       <span class="string">    specification.</span>
<span id="line362">362</span>       <span class="string"></span>
<span id="line363">363</span>       <span class="string">    Examples:</span>
<span id="line364">364</span>       <span class="string"></span>
<span id="line365">365</span>       <span class="string">    &gt;&gt;&gt; clamp(10, 0, 100)</span>
<span id="line366">366</span>       <span class="string">    10</span>
<span id="line367">367</span>       <span class="string">    &gt;&gt;&gt; clamp(-10, 0, 100)</span>
<span id="line368">368</span>       <span class="string">    0 </span>
<span id="line369">369</span>       <span class="string">    &gt;&gt;&gt; clamp(110, 0, 100)</span>
<span id="line370">370</span>       <span class="string">    100</span>
<span id="line371">371</span>       <span class="string">    &#x27;&#x27;&#x27;</span> 
<span id="line372">372</span>           <span class="keyword">return</span> <span class="variable">max</span><span class="operator">(</span><span class="variable">min</span><span class="operator">(</span><span class="variable">val</span><span class="operator">,</span> <span class="variable">upper_bound</span><span class="operator">)</span><span class="operator">,</span> <span class="variable">lower_bound</span><span class="operator">)</span>
<span id="line373">373</span>       
<span id="line374">374</span>       
<span id="line375">375</span>       <span class="keyword">def</span> <span class="variable">get_pixel</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">row</span><span class="operator">,</span> <span class="variable">col</span><span class="operator">)</span><span class="operator">:</span>
<span id="line376">376</span>           <span class="string">&#x27;&#x27;&#x27;Return the intensity of a pixel in image at</span>
<span id="line377">377</span>       <span class="string">    coordinate (row, col) if that coordinate is</span>
<span id="line378">378</span>       <span class="string">    within the bounds of the image. If the coordinate</span>
<span id="line379">379</span>       <span class="string">    is outside the bounds of the image then return</span>
<span id="line380">380</span>       <span class="string">    the intensity of its nearest in-bounds neighbor.</span>
<span id="line381">381</span>       <span class="string"></span>
<span id="line382">382</span>       <span class="string">    image is a list of lists of pixel intensities</span>
<span id="line383">383</span>       <span class="string">    (integers). row and col are integers.</span>
<span id="line384">384</span>       <span class="string"></span>
<span id="line385">385</span>       <span class="string">    We assume (but do not check) that the image</span>
<span id="line386">386</span>       <span class="string">    is not empty. An empty input image will result</span>
<span id="line387">387</span>       <span class="string">    in an IndexError.</span>
<span id="line388">388</span>       <span class="string"></span>
<span id="line389">389</span>       <span class="string">    This function was provided in the project</span>
<span id="line390">390</span>       <span class="string">    specification.</span>
<span id="line391">391</span>       <span class="string"></span>
<span id="line392">392</span>       <span class="string">    Examples:</span>
<span id="line393">393</span>       <span class="string"></span>
<span id="line394">394</span>       <span class="string">    &gt;&gt;&gt; example_image = [[1,2,3], [4,5,6]]</span>
<span id="line395">395</span>       <span class="string">    &gt;&gt;&gt; get_pixel(example_image, 0, 0)</span>
<span id="line396">396</span>       <span class="string">    1</span>
<span id="line397">397</span>       <span class="string">    &gt;&gt;&gt; get_pixel(example_image, 0, 1)</span>
<span id="line398">398</span>       <span class="string">    2</span>
<span id="line399">399</span>       <span class="string">    &gt;&gt;&gt; get_pixel(example_image, -1, 0)</span>
<span id="line400">400</span>       <span class="string">    1</span>
<span id="line401">401</span>       <span class="string">    &gt;&gt;&gt; get_pixel(example_image, 1, 3)</span>
<span id="line402">402</span>       <span class="string">    6</span>
<span id="line403">403</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line404">404</span>           <span class="comment"># Find the bounds of the image.</span>
<span id="line405">405</span>           <span class="variable">max_row</span> <span class="operator">=</span> <span class="variable">get_height</span><span class="operator">(</span><span class="variable">image</span><span class="operator">)</span> <span class="operator">-</span> <span class="number">1</span>
<span id="line406">406</span>           <span class="variable">max_col</span> <span class="operator">=</span> <span class="variable">get_width</span><span class="operator">(</span><span class="variable">image</span><span class="operator">)</span> <span class="operator">-</span> <span class="number">1</span>
<span id="line407">407</span>           <span class="comment"># Make sure the coordinate is within the image</span>
<span id="line408">408</span>           <span class="comment"># bounds.</span>
<span id="line409">409</span>           <span class="variable">new_row</span> <span class="operator">=</span> <span class="variable">clamp</span><span class="operator">(</span><span class="variable">row</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="variable">max_row</span><span class="operator">)</span>
<span id="line410">410</span>           <span class="variable">new_col</span> <span class="operator">=</span> <span class="variable">clamp</span><span class="operator">(</span><span class="variable">col</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="variable">max_col</span><span class="operator">)</span>
<span id="line411">411</span>           <span class="keyword">return</span> <span class="variable">image</span><span class="operator">[</span><span class="variable">new_row</span><span class="operator">]</span><span class="operator">[</span><span class="variable">new_col</span><span class="operator">]</span>
<span id="line412">412</span>       
<span id="line413">413</span>       <span class="keyword">def</span> <span class="variable">edge_detect</span><span class="operator">(</span><span class="variable">in_filename</span><span class="operator">,</span> <span class="variable">out_filename</span><span class="operator">,</span> <span class="variable">threshold</span><span class="operator">)</span><span class="operator">:</span>
<span id="line414">414</span>           <span class="string">&#x27;&#x27;&#x27;Apply the edge detection algorithm to an image file</span>
<span id="line415">415</span>       <span class="string">    and save the result to an output file. Gradient scores</span>
<span id="line416">416</span>       <span class="string">    above the threshold parameter are considered edges.</span>
<span id="line417">417</span>       <span class="string"></span>
<span id="line418">418</span>       <span class="string">    Example, assuming we have a file called &#x27;floyd.png&#x27;</span>
<span id="line419">419</span>       <span class="string">    in the same directory as the program. The output</span>
<span id="line420">420</span>       <span class="string">    will be saved in a file called &#x27;floyd_edge.png&#x27;:</span>
<span id="line421">421</span>       <span class="string"></span>
<span id="line422">422</span>       <span class="string">    in_filename and out_filename are strings. threshold</span>
<span id="line423">423</span>       <span class="string">    is a number (integer or float).</span>
<span id="line424">424</span>       <span class="string"></span>
<span id="line425">425</span>       <span class="string">    The result is None.</span>
<span id="line426">426</span>       <span class="string"></span>
<span id="line427">427</span>       <span class="string">    &gt;&gt;&gt; edge_detect(&#x27;floyd.png&#x27;, &#x27;floyd_edge.png&#x27;, 200)</span>
<span id="line428">428</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line429">429</span>           <span class="variable">in_image</span> <span class="operator">=</span> <span class="variable">read_image</span><span class="operator">(</span><span class="variable">in_filename</span><span class="operator">)</span>
<span id="line430">430</span>           <span class="variable">out_image</span> <span class="operator">=</span> <span class="variable">convolute</span><span class="operator">(</span><span class="variable">in_image</span><span class="operator">,</span> <span class="variable">threshold</span><span class="operator">)</span>
<span id="line431">431</span>           <span class="variable">write_image</span><span class="operator">(</span><span class="variable">out_image</span><span class="operator">,</span> <span class="variable">out_filename</span><span class="operator">)</span>
<span id="line432">432</span>       
<span id="line433">433</span>       
<span id="line434">434</span>       <span class="comment"># Testing code and data below.</span>
<span id="line435">435</span>       
<span id="line436">436</span>       <span class="comment"># 2 x 2 checkerboard image with random noise applied.</span>
<span id="line437">437</span>       <span class="variable">CHECKER</span> <span class="operator">=</span> \
<span id="line438">438</span>           <span class="operator">[</span><span class="operator">[</span><span class="number">11</span><span class="operator">,</span>  <span class="number">1</span><span class="operator">,</span>   <span class="number">2</span><span class="operator">,</span>   <span class="number">15</span><span class="operator">,</span>  <span class="number">35</span><span class="operator">,</span>  <span class="number">247</span><span class="operator">,</span> <span class="number">205</span><span class="operator">,</span> <span class="number">240</span><span class="operator">,</span> <span class="number">214</span><span class="operator">,</span> <span class="number">219</span><span class="operator">]</span><span class="operator">,</span>
<span id="line439">439</span>            <span class="operator">[</span><span class="number">17</span><span class="operator">,</span>  <span class="number">20</span><span class="operator">,</span>  <span class="number">24</span><span class="operator">,</span>  <span class="number">35</span><span class="operator">,</span>  <span class="number">0</span><span class="operator">,</span>   <span class="number">235</span><span class="operator">,</span> <span class="number">235</span><span class="operator">,</span> <span class="number">238</span><span class="operator">,</span> <span class="number">249</span><span class="operator">,</span> <span class="number">223</span><span class="operator">]</span><span class="operator">,</span>
<span id="line440">440</span>            <span class="operator">[</span><span class="number">17</span><span class="operator">,</span>  <span class="number">31</span><span class="operator">,</span>  <span class="number">27</span><span class="operator">,</span>  <span class="number">31</span><span class="operator">,</span>  <span class="number">46</span><span class="operator">,</span>  <span class="number">209</span><span class="operator">,</span> <span class="number">239</span><span class="operator">,</span> <span class="number">236</span><span class="operator">,</span> <span class="number">247</span><span class="operator">,</span> <span class="number">230</span><span class="operator">]</span><span class="operator">,</span>
<span id="line441">441</span>            <span class="operator">[</span><span class="number">12</span><span class="operator">,</span>  <span class="number">1</span><span class="operator">,</span>   <span class="number">37</span><span class="operator">,</span>  <span class="number">24</span><span class="operator">,</span>  <span class="number">38</span><span class="operator">,</span>  <span class="number">241</span><span class="operator">,</span> <span class="number">219</span><span class="operator">,</span> <span class="number">220</span><span class="operator">,</span> <span class="number">231</span><span class="operator">,</span> <span class="number">211</span><span class="operator">]</span><span class="operator">,</span>
<span id="line442">442</span>            <span class="operator">[</span><span class="number">37</span><span class="operator">,</span>  <span class="number">13</span><span class="operator">,</span>  <span class="number">19</span><span class="operator">,</span>  <span class="number">10</span><span class="operator">,</span>  <span class="number">44</span><span class="operator">,</span>  <span class="number">255</span><span class="operator">,</span> <span class="number">220</span><span class="operator">,</span> <span class="number">235</span><span class="operator">,</span> <span class="number">227</span><span class="operator">,</span> <span class="number">252</span><span class="operator">]</span><span class="operator">,</span>
<span id="line443">443</span>            <span class="operator">[</span><span class="number">243</span><span class="operator">,</span> <span class="number">205</span><span class="operator">,</span> <span class="number">227</span><span class="operator">,</span> <span class="number">224</span><span class="operator">,</span> <span class="number">239</span><span class="operator">,</span> <span class="number">12</span><span class="operator">,</span>  <span class="number">21</span><span class="operator">,</span>  <span class="number">47</span><span class="operator">,</span>  <span class="number">42</span><span class="operator">,</span>  <span class="number">9</span>  <span class="operator">]</span><span class="operator">,</span>
<span id="line444">444</span>            <span class="operator">[</span><span class="number">220</span><span class="operator">,</span> <span class="number">241</span><span class="operator">,</span> <span class="number">234</span><span class="operator">,</span> <span class="number">237</span><span class="operator">,</span> <span class="number">223</span><span class="operator">,</span> <span class="number">50</span><span class="operator">,</span>  <span class="number">16</span><span class="operator">,</span>  <span class="number">0</span><span class="operator">,</span>   <span class="number">1</span><span class="operator">,</span>   <span class="number">28</span> <span class="operator">]</span><span class="operator">,</span>
<span id="line445">445</span>            <span class="operator">[</span><span class="number">248</span><span class="operator">,</span> <span class="number">241</span><span class="operator">,</span> <span class="number">207</span><span class="operator">,</span> <span class="number">247</span><span class="operator">,</span> <span class="number">218</span><span class="operator">,</span> <span class="number">13</span><span class="operator">,</span>  <span class="number">14</span><span class="operator">,</span>  <span class="number">48</span><span class="operator">,</span>  <span class="number">39</span><span class="operator">,</span>  <span class="number">42</span> <span class="operator">]</span><span class="operator">,</span>
<span id="line446">446</span>            <span class="operator">[</span><span class="number">204</span><span class="operator">,</span> <span class="number">213</span><span class="operator">,</span> <span class="number">230</span><span class="operator">,</span> <span class="number">248</span><span class="operator">,</span> <span class="number">213</span><span class="operator">,</span> <span class="number">50</span><span class="operator">,</span>  <span class="number">3</span><span class="operator">,</span>   <span class="number">28</span><span class="operator">,</span>  <span class="number">25</span><span class="operator">,</span>  <span class="number">8</span>  <span class="operator">]</span><span class="operator">,</span>
<span id="line447">447</span>            <span class="operator">[</span><span class="number">215</span><span class="operator">,</span> <span class="number">227</span><span class="operator">,</span> <span class="number">249</span><span class="operator">,</span> <span class="number">226</span><span class="operator">,</span> <span class="number">254</span><span class="operator">,</span> <span class="number">40</span><span class="operator">,</span>  <span class="number">11</span><span class="operator">,</span>  <span class="number">35</span><span class="operator">,</span>  <span class="number">48</span><span class="operator">,</span>  <span class="number">45</span> <span class="operator">]</span><span class="operator">]</span>
<span id="line448">448</span>       
<span id="line449">449</span>       <span class="comment"># The result of detecting edges in CHECKER with a threshold of 200.</span>
<span id="line450">450</span>       <span class="variable">CHECKER_EDGE_200</span> <span class="operator">=</span> \
<span id="line451">451</span>           <span class="operator">[</span><span class="operator">[</span><span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span>  <span class="operator">]</span><span class="operator">,</span>
<span id="line452">452</span>            <span class="operator">[</span><span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span>  <span class="operator">]</span><span class="operator">,</span>
<span id="line453">453</span>            <span class="operator">[</span><span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span>  <span class="operator">]</span><span class="operator">,</span>
<span id="line454">454</span>            <span class="operator">[</span><span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span>  <span class="operator">]</span><span class="operator">,</span>
<span id="line455">455</span>            <span class="operator">[</span><span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">]</span><span class="operator">,</span>
<span id="line456">456</span>            <span class="operator">[</span><span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">]</span><span class="operator">,</span>
<span id="line457">457</span>            <span class="operator">[</span><span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span>  <span class="operator">]</span><span class="operator">,</span>
<span id="line458">458</span>            <span class="operator">[</span><span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span>  <span class="operator">]</span><span class="operator">,</span>
<span id="line459">459</span>            <span class="operator">[</span><span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span>  <span class="operator">]</span><span class="operator">,</span>
<span id="line460">460</span>            <span class="operator">[</span><span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span>  <span class="operator">]</span><span class="operator">]</span>
<span id="line461">461</span>       
<span id="line462">462</span>       <span class="comment"># An image with one row and column.</span>
<span id="line463">463</span>       <span class="variable">ONE_PIXEL_IMAGE</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">[</span><span class="number">100</span><span class="operator">]</span><span class="operator">]</span>
<span id="line464">464</span>       
<span id="line465">465</span>       <span class="comment"># An image with one row and seven columns.</span>
<span id="line466">466</span>       <span class="variable">ONE_ROW_IMAGE</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">[</span><span class="number">100</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">200</span><span class="operator">,</span> <span class="number">50</span><span class="operator">,</span> <span class="number">50</span><span class="operator">,</span> <span class="number">100</span><span class="operator">,</span> <span class="number">22</span><span class="operator">]</span><span class="operator">]</span>
<span id="line467">467</span>       
<span id="line468">468</span>       <span class="comment"># An image with seven rows and one column.</span>
<span id="line469">469</span>       <span class="variable">ONE_COL_IMAGE</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">[</span><span class="number">100</span><span class="operator">]</span><span class="operator">,</span> <span class="operator">[</span><span class="number">0</span><span class="operator">]</span><span class="operator">,</span> <span class="operator">[</span><span class="number">200</span><span class="operator">]</span><span class="operator">,</span> <span class="operator">[</span><span class="number">50</span><span class="operator">]</span><span class="operator">,</span> <span class="operator">[</span><span class="number">50</span><span class="operator">]</span><span class="operator">,</span> <span class="operator">[</span><span class="number">100</span><span class="operator">]</span><span class="operator">,</span> <span class="operator">[</span><span class="number">22</span><span class="operator">]</span><span class="operator">]</span>
<span id="line470">470</span>       
<span id="line471">471</span>       <span class="comment"># An image with all pixels having the same intensity.</span>
<span id="line472">472</span>       <span class="variable">FLAT_IMAGE</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">[</span><span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">]</span><span class="operator">,</span>
<span id="line473">473</span>                     <span class="operator">[</span><span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">]</span><span class="operator">,</span>
<span id="line474">474</span>                     <span class="operator">[</span><span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">]</span><span class="operator">,</span>
<span id="line475">475</span>                     <span class="operator">[</span><span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">]</span><span class="operator">,</span>
<span id="line476">476</span>                     <span class="operator">[</span><span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">,</span> <span class="number">99</span><span class="operator">]</span><span class="operator">]</span>
<span id="line477">477</span>       
<span id="line478">478</span>       <span class="comment"># An image with a sharp vertical edge.</span>
<span id="line479">479</span>       <span class="variable">VERT_EDGE</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">]</span><span class="operator">,</span>
<span id="line480">480</span>                    <span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">]</span><span class="operator">,</span>
<span id="line481">481</span>                    <span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">]</span><span class="operator">,</span>
<span id="line482">482</span>                    <span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">]</span><span class="operator">]</span>
<span id="line483">483</span>       
<span id="line484">484</span>       <span class="comment"># An image with a sharp horizontal edge.</span>
<span id="line485">485</span>       <span class="variable">HORIZ_EDGE</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">[</span><span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">]</span><span class="operator">,</span>
<span id="line486">486</span>                     <span class="operator">[</span><span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">]</span><span class="operator">,</span>
<span id="line487">487</span>                     <span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line488">488</span>                     <span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">]</span>
<span id="line489">489</span>       
<span id="line490">490</span>       <span class="comment"># An image with random pixel intensities.</span>
<span id="line491">491</span>       <span class="variable">RANDOM_IMAGE</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">[</span><span class="number">108</span><span class="operator">,</span> <span class="number">171</span><span class="operator">,</span> <span class="number">27</span><span class="operator">,</span>  <span class="number">252</span><span class="operator">,</span> <span class="number">196</span><span class="operator">]</span><span class="operator">,</span>
<span id="line492">492</span>                       <span class="operator">[</span><span class="number">19</span><span class="operator">,</span>  <span class="number">183</span><span class="operator">,</span> <span class="number">134</span><span class="operator">,</span> <span class="number">219</span><span class="operator">,</span> <span class="number">169</span><span class="operator">]</span><span class="operator">,</span>
<span id="line493">493</span>                       <span class="operator">[</span><span class="number">246</span><span class="operator">,</span> <span class="number">246</span><span class="operator">,</span> <span class="number">108</span><span class="operator">,</span> <span class="number">105</span><span class="operator">,</span> <span class="number">77</span><span class="operator">]</span><span class="operator">,</span>
<span id="line494">494</span>                       <span class="operator">[</span><span class="number">177</span><span class="operator">,</span> <span class="number">232</span><span class="operator">,</span> <span class="number">22</span><span class="operator">,</span>  <span class="number">32</span><span class="operator">,</span>  <span class="number">95</span><span class="operator">]</span><span class="operator">,</span>
<span id="line495">495</span>                       <span class="operator">[</span><span class="number">109</span><span class="operator">,</span> <span class="number">211</span><span class="operator">,</span> <span class="number">219</span><span class="operator">,</span> <span class="number">218</span><span class="operator">,</span> <span class="number">127</span><span class="operator">]</span><span class="operator">,</span>
<span id="line496">496</span>                       <span class="operator">[</span><span class="number">134</span><span class="operator">,</span> <span class="number">90</span><span class="operator">,</span>  <span class="number">177</span><span class="operator">,</span> <span class="number">143</span><span class="operator">,</span> <span class="number">150</span><span class="operator">]</span><span class="operator">,</span>
<span id="line497">497</span>                       <span class="operator">[</span><span class="number">11</span><span class="operator">,</span>  <span class="number">4</span><span class="operator">,</span>   <span class="number">82</span><span class="operator">,</span>  <span class="number">112</span><span class="operator">,</span> <span class="number">151</span><span class="operator">]</span><span class="operator">,</span>
<span id="line498">498</span>                       <span class="operator">[</span><span class="number">243</span><span class="operator">,</span> <span class="number">34</span><span class="operator">,</span>  <span class="number">148</span><span class="operator">,</span> <span class="number">27</span><span class="operator">,</span>  <span class="number">84</span><span class="operator">]</span><span class="operator">,</span>
<span id="line499">499</span>                       <span class="operator">[</span><span class="number">252</span><span class="operator">,</span> <span class="number">137</span><span class="operator">,</span> <span class="number">71</span><span class="operator">,</span>  <span class="number">125</span><span class="operator">,</span> <span class="number">194</span><span class="operator">]</span><span class="operator">]</span>
<span id="line500">500</span>       
<span id="line501">501</span>       <span class="comment"># Test cases for gradient_row.</span>
<span id="line502">502</span>       <span class="comment"># Each tuple contains (function call as string, expected output).</span>
<span id="line503">503</span>       <span class="variable">GRADIENT_ROW_TESTS</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line504">504</span>           <span class="operator">(</span><span class="string">&#x27;gradient_row(ONE_PIXEL_IMAGE, 0, 0)&#x27;</span><span class="operator">,</span> <span class="number">0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line505">505</span>           <span class="operator">(</span><span class="string">&#x27;gradient_row(ONE_ROW_IMAGE, 0, 3)&#x27;</span><span class="operator">,</span> <span class="number">0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line506">506</span>           <span class="operator">(</span><span class="string">&#x27;gradient_row(ONE_COL_IMAGE, 2, 3)&#x27;</span><span class="operator">,</span> <span class="operator">-</span><span class="number">200</span><span class="operator">)</span><span class="operator">,</span>
<span id="line507">507</span>           <span class="operator">(</span><span class="string">&#x27;gradient_row(FLAT_IMAGE, 3, 1)&#x27;</span><span class="operator">,</span> <span class="number">0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line508">508</span>           <span class="operator">(</span><span class="string">&#x27;gradient_row(VERT_EDGE, 1, 2)&#x27;</span><span class="operator">,</span> <span class="number">0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line509">509</span>           <span class="operator">(</span><span class="string">&#x27;gradient_row(HORIZ_EDGE, 2, 1)&#x27;</span><span class="operator">,</span> <span class="number">1020</span><span class="operator">)</span><span class="operator">,</span>
<span id="line510">510</span>           <span class="operator">(</span><span class="string">&#x27;gradient_row(RANDOM_IMAGE, 6, 3)&#x27;</span><span class="operator">,</span> <span class="number">327</span><span class="operator">)</span>
<span id="line511">511</span>           <span class="operator">]</span>
<span id="line512">512</span>       
<span id="line513">513</span>       <span class="comment"># Test cases for gradient_col.</span>
<span id="line514">514</span>       <span class="comment"># Each tuple contains (function call as string, expected output).</span>
<span id="line515">515</span>       <span class="variable">GRADIENT_COL_TESTS</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line516">516</span>           <span class="operator">(</span><span class="string">&#x27;gradient_col(ONE_PIXEL_IMAGE, 0, 0)&#x27;</span><span class="operator">,</span> <span class="number">0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line517">517</span>           <span class="operator">(</span><span class="string">&#x27;gradient_col(ONE_ROW_IMAGE, 0, 6)&#x27;</span><span class="operator">,</span> <span class="operator">-</span><span class="number">312</span><span class="operator">)</span><span class="operator">,</span>
<span id="line518">518</span>           <span class="operator">(</span><span class="string">&#x27;gradient_col(ONE_COL_IMAGE, 6, 0)&#x27;</span><span class="operator">,</span> <span class="number">0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line519">519</span>           <span class="operator">(</span><span class="string">&#x27;gradient_col(FLAT_IMAGE, 4, 0)&#x27;</span><span class="operator">,</span> <span class="number">0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line520">520</span>           <span class="operator">(</span><span class="string">&#x27;gradient_col(VERT_EDGE, 3, 1)&#x27;</span><span class="operator">,</span> <span class="number">1020</span><span class="operator">)</span><span class="operator">,</span>
<span id="line521">521</span>           <span class="operator">(</span><span class="string">&#x27;gradient_col(HORIZ_EDGE, 1, 2)&#x27;</span><span class="operator">,</span> <span class="number">0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line522">522</span>           <span class="operator">(</span><span class="string">&#x27;gradient_col(RANDOM_IMAGE, 0, 4)&#x27;</span><span class="operator">,</span> <span class="operator">-</span><span class="number">218</span><span class="operator">)</span>
<span id="line523">523</span>           <span class="operator">]</span>
<span id="line524">524</span>       
<span id="line525">525</span>       <span class="comment"># Test cases for gradient_magnitude.</span>
<span id="line526">526</span>       <span class="comment"># Each tuple contains (function call as string, expected output).</span>
<span id="line527">527</span>       <span class="variable">GRADIENT_MAG_TESTS</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line528">528</span>           <span class="operator">(</span><span class="string">&#x27;gradient_magnitude(ONE_PIXEL_IMAGE, 0, 0)&#x27;</span><span class="operator">,</span> <span class="number">0.0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line529">529</span>           <span class="operator">(</span><span class="string">&#x27;gradient_magnitude(ONE_ROW_IMAGE, 0, 0)&#x27;</span><span class="operator">,</span> <span class="number">400.0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line530">530</span>           <span class="operator">(</span><span class="string">&#x27;gradient_magnitude(ONE_COL_IMAGE, 0, 0)&#x27;</span><span class="operator">,</span> <span class="number">400.0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line531">531</span>           <span class="operator">(</span><span class="string">&#x27;gradient_magnitude(FLAT_IMAGE, 2, 4)&#x27;</span><span class="operator">,</span> <span class="number">0.0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line532">532</span>           <span class="operator">(</span><span class="string">&#x27;gradient_magnitude(VERT_EDGE, 2, 1)&#x27;</span><span class="operator">,</span> <span class="number">1020.0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line533">533</span>           <span class="operator">(</span><span class="string">&#x27;gradient_magnitude(HORIZ_EDGE, 1, 0)&#x27;</span><span class="operator">,</span> <span class="number">1020.0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line534">534</span>           <span class="operator">(</span><span class="string">&#x27;gradient_magnitude(RANDOM_IMAGE, 1, 3)&#x27;</span><span class="operator">,</span> <span class="number">391.775445887</span><span class="operator">)</span>
<span id="line535">535</span>           <span class="operator">]</span>
<span id="line536">536</span>       
<span id="line537">537</span>       <span class="comment"># Test cases for gradient_threshold.</span>
<span id="line538">538</span>       <span class="comment"># Each tuple contains (function call as string, expected output).</span>
<span id="line539">539</span>       <span class="variable">GRADIENT_THRESH_TESTS</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line540">540</span>           <span class="operator">(</span><span class="string">&#x27;gradient_threshold(FLAT_IMAGE, 2, 2, 0)&#x27;</span><span class="operator">,</span> <span class="number">0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line541">541</span>           <span class="operator">(</span><span class="string">&#x27;gradient_threshold(FLAT_IMAGE, 2, 2, -1)&#x27;</span><span class="operator">,</span> <span class="number">255</span><span class="operator">)</span><span class="operator">,</span>
<span id="line542">542</span>           <span class="operator">(</span><span class="string">&#x27;gradient_threshold(VERT_EDGE, 3, 1, 1000)&#x27;</span><span class="operator">,</span> <span class="number">255</span><span class="operator">)</span><span class="operator">,</span>
<span id="line543">543</span>           <span class="operator">(</span><span class="string">&#x27;gradient_threshold(VERT_EDGE, 3, 1, 2000)&#x27;</span><span class="operator">,</span> <span class="number">0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line544">544</span>           <span class="operator">(</span><span class="string">&#x27;gradient_threshold(HORIZ_EDGE, 2, 1, 1000)&#x27;</span><span class="operator">,</span> <span class="number">255</span><span class="operator">)</span><span class="operator">,</span>
<span id="line545">545</span>           <span class="operator">(</span><span class="string">&#x27;gradient_threshold(HORIZ_EDGE, 2, 1, 2000)&#x27;</span><span class="operator">,</span> <span class="number">0</span><span class="operator">)</span><span class="operator">,</span>
<span id="line546">546</span>           <span class="operator">(</span><span class="string">&#x27;gradient_threshold(RANDOM_IMAGE, 1, 3, 390)&#x27;</span><span class="operator">,</span> <span class="number">255</span><span class="operator">)</span><span class="operator">,</span>
<span id="line547">547</span>           <span class="operator">]</span>
<span id="line548">548</span>       
<span id="line549">549</span>       <span class="comment"># Test cases for convolute.</span>
<span id="line550">550</span>       <span class="comment"># Each tuple contains (function call as string, expected output).</span>
<span id="line551">551</span>       <span class="variable">CONVOLUTE_TESTS</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line552">552</span>           <span class="operator">(</span><span class="string">&#x27;convolute(ONE_PIXEL_IMAGE, 0)&#x27;</span><span class="operator">,</span> <span class="operator">[</span><span class="operator">[</span><span class="number">0</span><span class="operator">]</span><span class="operator">]</span><span class="operator">)</span><span class="operator">,</span>
<span id="line553">553</span>           <span class="operator">(</span><span class="string">&#x27;convolute(ONE_ROW_IMAGE, 300)&#x27;</span><span class="operator">,</span>
<span id="line554">554</span>               <span class="operator">[</span><span class="operator">[</span><span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">255</span><span class="operator">]</span><span class="operator">]</span><span class="operator">)</span><span class="operator">,</span>
<span id="line555">555</span>           <span class="operator">(</span><span class="string">&#x27;convolute(ONE_COL_IMAGE, 200)&#x27;</span><span class="operator">,</span>
<span id="line556">556</span>               <span class="operator">[</span><span class="operator">[</span><span class="number">255</span><span class="operator">]</span><span class="operator">,</span> <span class="operator">[</span><span class="number">255</span><span class="operator">]</span><span class="operator">,</span> <span class="operator">[</span><span class="number">0</span><span class="operator">]</span><span class="operator">,</span> <span class="operator">[</span><span class="number">255</span><span class="operator">]</span><span class="operator">,</span> <span class="operator">[</span><span class="number">0</span><span class="operator">]</span><span class="operator">,</span> <span class="operator">[</span><span class="number">0</span><span class="operator">]</span><span class="operator">,</span> <span class="operator">[</span><span class="number">255</span><span class="operator">]</span><span class="operator">]</span><span class="operator">)</span><span class="operator">,</span>
<span id="line557">557</span>           <span class="operator">(</span><span class="string">&#x27;convolute(FLAT_IMAGE, 0)&#x27;</span><span class="operator">,</span>
<span id="line558">558</span>               <span class="operator">[</span><span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line559">559</span>                <span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line560">560</span>                <span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line561">561</span>                <span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line562">562</span>                <span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">]</span><span class="operator">)</span><span class="operator">,</span>
<span id="line563">563</span>           <span class="operator">(</span><span class="string">&#x27;convolute(VERT_EDGE, 1000)&#x27;</span><span class="operator">,</span>
<span id="line564">564</span>               <span class="operator">[</span><span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line565">565</span>                <span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line566">566</span>                <span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line567">567</span>                <span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">]</span><span class="operator">)</span><span class="operator">,</span>
<span id="line568">568</span>           <span class="operator">(</span><span class="string">&#x27;convolute(HORIZ_EDGE, 1000)&#x27;</span><span class="operator">,</span>
<span id="line569">569</span>               <span class="operator">[</span><span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line570">570</span>                <span class="operator">[</span><span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">]</span><span class="operator">,</span>
<span id="line571">571</span>                <span class="operator">[</span><span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">]</span><span class="operator">,</span>
<span id="line572">572</span>                <span class="operator">[</span><span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">]</span><span class="operator">)</span><span class="operator">,</span>
<span id="line573">573</span>           <span class="operator">(</span><span class="string">&#x27;convolute(RANDOM_IMAGE, 500)&#x27;</span><span class="operator">,</span>
<span id="line574">574</span>               <span class="operator">[</span><span class="operator">[</span><span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line575">575</span>                <span class="operator">[</span><span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">255</span><span class="operator">]</span><span class="operator">,</span>
<span id="line576">576</span>                <span class="operator">[</span><span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>   <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line577">577</span>                <span class="operator">[</span><span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line578">578</span>                <span class="operator">[</span><span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line579">579</span>                <span class="operator">[</span><span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line580">580</span>                <span class="operator">[</span><span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line581">581</span>                <span class="operator">[</span><span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">]</span><span class="operator">,</span>
<span id="line582">582</span>                <span class="operator">[</span><span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>   <span class="number">0</span><span class="operator">,</span>   <span class="number">255</span><span class="operator">]</span><span class="operator">]</span><span class="operator">)</span><span class="operator">,</span>
<span id="line583">583</span>           <span class="operator">(</span><span class="string">&#x27;convolute(CHECKER, 200)&#x27;</span><span class="operator">,</span> <span class="variable">CHECKER_EDGE_200</span><span class="operator">)</span>
<span id="line584">584</span>           <span class="operator">]</span>
<span id="line585">585</span>       
<span id="line586">586</span>       
<span id="line587">587</span>       <span class="keyword">def</span> <span class="variable">tester</span><span class="operator">(</span><span class="variable">function_name</span><span class="operator">,</span> <span class="variable">test_cases</span><span class="operator">,</span> <span class="variable">equality</span><span class="operator">)</span><span class="operator">:</span>
<span id="line588">588</span>           <span class="string">&#x27;&#x27;&#x27;Test a function on a number of test cases, comparing</span>
<span id="line589">589</span>       <span class="string">    the actual output with the expected output.</span>
<span id="line590">590</span>       <span class="string">    Report messages for PASSED and FAILED test cases and</span>
<span id="line591">591</span>       <span class="string">    report the number of each kind.</span>
<span id="line592">592</span>       <span class="string"></span>
<span id="line593">593</span>       <span class="string">    Parameters:</span>
<span id="line594">594</span>       <span class="string"></span>
<span id="line595">595</span>       <span class="string">        function_name: a string naming the function being tested.</span>
<span id="line596">596</span>       <span class="string">        test_cases: a list of 2-tuples of the form:</span>
<span id="line597">597</span>       <span class="string">            (test_code as a string, expected result)</span>
<span id="line598">598</span>       <span class="string">        equality: a function which determines if two objects are</span>
<span id="line599">599</span>       <span class="string">            equal. Used to check if the actual result is equal to</span>
<span id="line600">600</span>       <span class="string">            the expected result.</span>
<span id="line601">601</span>       <span class="string"></span>
<span id="line602">602</span>       <span class="string">    Result: None.</span>
<span id="line603">603</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line604">604</span>           <span class="variable">print</span><span class="operator">(</span><span class="string">&quot;*** TESTING %s ***\n&quot;</span> <span class="operator">%</span> <span class="variable">function_name</span><span class="operator">)</span>
<span id="line605">605</span>           <span class="variable">num_passes</span> <span class="operator">=</span> <span class="number">0</span>
<span id="line606">606</span>           <span class="variable">num_fails</span> <span class="operator">=</span> <span class="number">0</span>
<span id="line607">607</span>           <span class="keyword">for</span> <span class="variable">test_code</span><span class="operator">,</span> <span class="variable">expect</span> <span class="keyword">in</span> <span class="variable">test_cases</span><span class="operator">:</span>
<span id="line608">608</span>               <span class="comment"># Execute the test_code.</span>
<span id="line609">609</span>               <span class="comment"># The test code is a string representing a Python</span>
<span id="line610">610</span>               <span class="comment"># expression. We execute the Python expression by calling</span>
<span id="line611">611</span>               <span class="comment"># the eval built in function.</span>
<span id="line612">612</span>               <span class="variable">result</span> <span class="operator">=</span> <span class="variable">eval</span><span class="operator">(</span><span class="variable">test_code</span><span class="operator">)</span>
<span id="line613">613</span>               <span class="comment"># Check if the output of the test case is equal to the expected</span>
<span id="line614">614</span>               <span class="comment"># output using the supplied equality function.</span>
<span id="line615">615</span>               <span class="keyword">if</span> <span class="variable">equality</span><span class="operator">(</span><span class="variable">result</span><span class="operator">,</span> <span class="variable">expect</span><span class="operator">)</span><span class="operator">:</span>
<span id="line616">616</span>                   <span class="variable">print</span><span class="operator">(</span><span class="string">&quot;PASSED: &quot;</span> <span class="operator">+</span> <span class="variable">test_code</span><span class="operator">)</span>
<span id="line617">617</span>                   <span class="variable">num_passes</span> <span class="operator">+=</span> <span class="number">1</span>
<span id="line618">618</span>               <span class="keyword">else</span><span class="operator">:</span>
<span id="line619">619</span>                   <span class="variable">print</span><span class="operator">(</span><span class="string">&quot;FAILED: &quot;</span> <span class="operator">+</span> <span class="variable">test_code</span><span class="operator">)</span>
<span id="line620">620</span>                   <span class="comment"># Print the expected result.</span>
<span id="line621">621</span>                   <span class="variable">print</span><span class="operator">(</span><span class="string">&quot;\t\tExpected: %s&quot;</span> <span class="operator">%</span> <span class="variable">expect</span><span class="operator">)</span>
<span id="line622">622</span>                   <span class="comment"># Print the actual result.</span>
<span id="line623">623</span>                   <span class="variable">print</span><span class="operator">(</span><span class="string">&quot;\t\tResult: %s&quot;</span> <span class="operator">%</span> <span class="variable">result</span><span class="operator">)</span>
<span id="line624">624</span>                   <span class="variable">num_fails</span> <span class="operator">+=</span> <span class="number">1</span>
<span id="line625">625</span>           <span class="comment"># Display a summary of the number of passes and fails.</span>
<span id="line626">626</span>           <span class="variable">print</span><span class="operator">(</span><span class="string">&quot;\nNum passes = %s&quot;</span> <span class="operator">%</span> <span class="variable">num_passes</span><span class="operator">)</span>
<span id="line627">627</span>           <span class="variable">print</span><span class="operator">(</span><span class="string">&quot;Num fails = %s\n&quot;</span> <span class="operator">%</span> <span class="variable">num_fails</span><span class="operator">)</span>
<span id="line628">628</span>       
<span id="line629">629</span>       
<span id="line630">630</span>       <span class="keyword">def</span> <span class="variable">exact_equal</span><span class="operator">(</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">)</span><span class="operator">:</span>
<span id="line631">631</span>           <span class="string">&#x27;&#x27;&#x27;Test for exact equality between two objects.&#x27;&#x27;&#x27;</span>
<span id="line632">632</span>           <span class="keyword">return</span> <span class="variable">x</span> <span class="operator">==</span> <span class="variable">y</span>
<span id="line633">633</span>       
<span id="line634">634</span>       
<span id="line635">635</span>       <span class="keyword">def</span> <span class="variable">near_equal</span><span class="operator">(</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">)</span><span class="operator">:</span>
<span id="line636">636</span>           <span class="string">&#x27;&#x27;&#x27;Test if one float is sufficiently close to another to</span>
<span id="line637">637</span>       <span class="string">    be considered equal.</span>
<span id="line638">638</span>       <span class="string"></span>
<span id="line639">639</span>       <span class="string">    Note this function compares the absolute difference to</span>
<span id="line640">640</span>       <span class="string">    some small value EPSILON. In general this technique is not</span>
<span id="line641">641</span>       <span class="string">    recommended for floating point comparison, but it is</span>
<span id="line642">642</span>       <span class="string">    sufficient for the purposes of this project.</span>
<span id="line643">643</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line644">644</span>           <span class="comment"># Use a very lenient epsilon. We don&#x27;t need to be too</span>
<span id="line645">645</span>           <span class="comment"># stringent for this project. Generally this will be used</span>
<span id="line646">646</span>           <span class="comment"># for comparing edge magnitudes, and we are not too concerned</span>
<span id="line647">647</span>           <span class="comment"># if they are slightly different than the expected value.</span>
<span id="line648">648</span>           <span class="variable">EPSILON</span> <span class="operator">=</span> <span class="number">0.005</span>
<span id="line649">649</span>           <span class="keyword">return</span> <span class="variable">x</span> <span class="operator">==</span> <span class="variable">y</span> <span class="keyword">or</span> <span class="variable">abs</span><span class="operator">(</span><span class="variable">x</span> <span class="operator">-</span> <span class="variable">y</span><span class="operator">)</span> <span class="operator">&lt;</span> <span class="variable">EPSILON</span>
<span id="line650">650</span>       
<span id="line651">651</span>       
<span id="line652">652</span>       <span class="keyword">def</span> <span class="variable">run_tests</span><span class="operator">(</span><span class="operator">)</span><span class="operator">:</span>
<span id="line653">653</span>           <span class="string">&#x27;&#x27;&#x27;Run all the test cases.&#x27;&#x27;&#x27;</span>
<span id="line654">654</span>           <span class="variable">tester</span><span class="operator">(</span><span class="string">&#x27;gradient_row&#x27;</span><span class="operator">,</span> <span class="variable">GRADIENT_ROW_TESTS</span><span class="operator">,</span> <span class="variable">exact_equal</span><span class="operator">)</span>
<span id="line655">655</span>           <span class="variable">tester</span><span class="operator">(</span><span class="string">&#x27;gradient_col&#x27;</span><span class="operator">,</span> <span class="variable">GRADIENT_COL_TESTS</span><span class="operator">,</span> <span class="variable">exact_equal</span><span class="operator">)</span>
<span id="line656">656</span>           <span class="variable">tester</span><span class="operator">(</span><span class="string">&#x27;gradient_magnitude&#x27;</span><span class="operator">,</span> <span class="variable">GRADIENT_MAG_TESTS</span><span class="operator">,</span> <span class="variable">near_equal</span><span class="operator">)</span>
<span id="line657">657</span>           <span class="variable">tester</span><span class="operator">(</span><span class="string">&#x27;gradient_threshold&#x27;</span><span class="operator">,</span> <span class="variable">GRADIENT_THRESH_TESTS</span><span class="operator">,</span> <span class="variable">exact_equal</span><span class="operator">)</span>
<span id="line658">658</span>           <span class="variable">tester</span><span class="operator">(</span><span class="string">&#x27;convolute&#x27;</span><span class="operator">,</span> <span class="variable">CONVOLUTE_TESTS</span><span class="operator">,</span> <span class="variable">exact_equal</span><span class="operator">)</span>
</code></pre>
           </div>
    </body>
</html>

