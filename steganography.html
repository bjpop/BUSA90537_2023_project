<!doctype html>
<html lang=en>
    <head>
        <meta charset=utf-8>
        <title>Pretty Python</title>
        <style>
            pre {font-size: 16pt}
            .variable {color: black}
            .comment {color: green}
            .keyword {color: blue}
            .string {color: orange}
            .number {color: red}
            .operator {color: purple}
        </style>
    </head>
    <body>
        <h1>Python code inspector</h1>
        <ul>
            <li><a href="#stats">Statistics</a></li>
            <li><a href="#code">Code</a></li>
        </ul>
           <div id="stats">
               <h2>Statistics</h2>
               <ul>
               <li>Number of lines = 693</li>
               <li>Maximum line length = 79</li>
               <li>Maximum variable length = 27</li>
               <li>Minumum variable length = 3</li>
               <li>Number of comments = 72</li>
               <li>Number of definitions = 21</li>
               <li>Number of strings = 79</li>
               <li>Number of numbers = 50</li>
               <li>Number of repeated contants = 61</li>
           </ul>
           </div>
           <div id="code">
               <h2>Python code</h2>
               <pre><code>
<span id="line1">1</span>         <span class="string">&#x27;&#x27;&#x27;</span>
<span id="line2">2</span>         <span class="string">###############################################################################</span>
<span id="line3">3</span>         <span class="string"></span>
<span id="line4">4</span>         <span class="string">Steganography</span>
<span id="line5">5</span>         <span class="string">-------------</span>
<span id="line6">6</span>         <span class="string"></span>
<span id="line7">7</span>         <span class="string">This module implements a steganographic scheme whereby ASCII text messages</span>
<span id="line8">8</span>         <span class="string">can be embedded (and hidden) within digital computer images. The purpose</span>
<span id="line9">9</span>         <span class="string">of the scheme is to allow users to hide secret information in otherwise</span>
<span id="line10">10</span>        <span class="string">innocent-looking pictures.</span>
<span id="line11">11</span>        <span class="string"></span>
<span id="line12">12</span>        <span class="string">Images are represented internally as rectangular lists of lists of pixel</span>
<span id="line13">13</span>        <span class="string">intensities. Pixels are 3-element tuples of integer intensity values</span>
<span id="line14">14</span>        <span class="string">in the range [0,255] inclusive.</span>
<span id="line15">15</span>        <span class="string"></span>
<span id="line16">16</span>        <span class="string">Two steganographic schemes are implemented. In both schemes the ASCII message</span>
<span id="line17">17</span>        <span class="string">is turned into a sequence of bits by converting each character to its</span>
<span id="line18">18</span>        <span class="string">ASCII code. The ASCCI code is then converted to 8 binary digits (a byte).</span>
<span id="line19">19</span>        <span class="string">Finally, the bytes for all characters are appended together in order.</span>
<span id="line20">20</span>        <span class="string"></span>
<span id="line21">21</span>        <span class="string">In the first scheme, the least significant bit (LSB) of each intensity</span>
<span id="line22">22</span>        <span class="string">value is assigned to the next bit from the binary message. In the second</span>
<span id="line23">23</span>        <span class="string">scheme, the bottom N bits of each intensity value is assigned to the next</span>
<span id="line24">24</span>        <span class="string">N bits from the message, where N is in the range [1,8] inclusive.</span>
<span id="line25">25</span>        <span class="string">The second scheme is a generalisation of the first scheme. The fewer</span>
<span id="line26">26</span>        <span class="string">bottom bits we use in each intensity value the lesser the visual</span>
<span id="line27">27</span>        <span class="string">change to the original image. However, using more bottom bits per</span>
<span id="line28">28</span>        <span class="string">intensity value allows us to encode larger messages in the same image.</span>
<span id="line29">29</span>        <span class="string"></span>
<span id="line30">30</span>        <span class="string">If there are fewer intensity values in the image than bits in the message</span>
<span id="line31">31</span>        <span class="string">both schemes encode as many bits as possible; the encoded</span>
<span id="line32">32</span>        <span class="string">message will be truncated. Conversely, if there are fewer bits in the</span>
<span id="line33">33</span>        <span class="string">message than intensity values in the image, then the binary message</span>
<span id="line34">34</span>        <span class="string">is paddded with sufficiently many 0 digits.</span>
<span id="line35">35</span>        <span class="string"></span>
<span id="line36">36</span>        <span class="string">When decoding messages from encoded images we retrieve all the encoded</span>
<span id="line37">37</span>        <span class="string">bits from the intensity values first. Then we decode each byte chunk</span>
<span id="line38">38</span>        <span class="string">in order, yielding one ASCII character per chunk. We ignore</span>
<span id="line39">39</span>        <span class="string">any bits left over if there are fewer than 8 at the end. We stop</span>
<span id="line40">40</span>        <span class="string">decoding the bits if we encounter a all-zero byte 00000000 - this</span>
<span id="line41">41</span>        <span class="string">indicates that there are no more encoded characters remaining. The</span>
<span id="line42">42</span>        <span class="string">zero byte works because of the way we padded the binary message with</span>
<span id="line43">43</span>        <span class="string">0 bits where necessary.</span>
<span id="line44">44</span>        <span class="string"></span>
<span id="line45">45</span>        <span class="string">This code is an attempt to satisfy the requirements of Project 2 for the</span>
<span id="line46">46</span>        <span class="string">University of Melbourne subject COMP10001 &quot;Foundations of Computing&quot;,</span>
<span id="line47">47</span>        <span class="string">Semester 2 2013.</span>
<span id="line48">48</span>        <span class="string"></span>
<span id="line49">49</span>        <span class="string">The inputs to each function are assumed to be valid, we make no attempt</span>
<span id="line50">50</span>        <span class="string">to check this in the program.</span>
<span id="line51">51</span>        <span class="string"></span>
<span id="line52">52</span>        <span class="string">The program is designed to be used with Python 2.6 and 2.7.</span>
<span id="line53">53</span>        <span class="string"></span>
<span id="line54">54</span>        <span class="string">You can run all the tests for the project using the run_all_tests()</span>
<span id="line55">55</span>        <span class="string">function:</span>
<span id="line56">56</span>        <span class="string">&gt;&gt;&gt; run_all_tests()</span>
<span id="line57">57</span>        <span class="string">This will report how many tests have passed and failed. Note that some of</span>
<span id="line58">58</span>        <span class="string">the tests rely on external files.</span>
<span id="line59">59</span>        <span class="string"></span>
<span id="line60">60</span>        <span class="string">Authors:</span>
<span id="line61">61</span>        <span class="string"></span>
<span id="line62">62</span>        <span class="string">Bernie Pope (bjpope@unimelb.edu.au)</span>
<span id="line63">63</span>        <span class="string"></span>
<span id="line64">64</span>        <span class="string">Date created:</span>
<span id="line65">65</span>        <span class="string"></span>
<span id="line66">66</span>        <span class="string">30 Sep 2013</span>
<span id="line67">67</span>        <span class="string"></span>
<span id="line68">68</span>        <span class="string">Date modified and reason:</span>
<span id="line69">69</span>        <span class="string"></span>
<span id="line70">70</span>        <span class="string">1  Oct 2013: Encode and decode implemented.</span>
<span id="line71">71</span>        <span class="string">6  Oct 2013: Round trip testing added.</span>
<span id="line72">72</span>        <span class="string">9  Oct 2013: Extended encode and decode implemented.</span>
<span id="line73">73</span>        <span class="string">10 Oct 2013: Extended test harness to support functions with multiple args.</span>
<span id="line74">74</span>        <span class="string">16 Oct 2013: More detailed header documentation.</span>
<span id="line75">75</span>        <span class="string">20 Oct 2013: Documentation for functions, and more test cases added.</span>
<span id="line76">76</span>        <span class="string">21 Oct 2013: Larger test cases for extended encode/decode, based on floyd.png.</span>
<span id="line77">77</span>        <span class="string">22 Oct 2013: Examples added to doc strings for functions.</span>
<span id="line78">78</span>        <span class="string">23 Oct 2013: Fixed warnings from pep8 and pylint.</span>
<span id="line79">79</span>        <span class="string"></span>
<span id="line80">80</span>        <span class="string">###############################################################################</span>
<span id="line81">81</span>        <span class="string">&#x27;&#x27;&#x27;</span>
<span id="line82">82</span>        
<span id="line83">83</span>        <span class="keyword">from</span> <span class="variable">bits</span> <span class="keyword">import</span> <span class="variable">char_to_bits</span><span class="operator">,</span> <span class="variable">bits_to_char</span><span class="operator">,</span> <span class="variable">get_bit</span><span class="operator">,</span> <span class="variable">set_bit</span>
<span id="line84">84</span>        <span class="keyword">from</span> <span class="variable">SimpleImage</span> <span class="keyword">import</span> <span class="variable">read_image</span>
<span id="line85">85</span>        
<span id="line86">86</span>        
<span id="line87">87</span>        <span class="keyword">def</span> <span class="variable">message_to_bits</span><span class="operator">(</span><span class="variable">message</span><span class="operator">)</span><span class="operator">:</span>
<span id="line88">88</span>            <span class="string">&#x27;&#x27;&#x27;Convert a string of ASCII characters to a string of bits.</span>
<span id="line89">89</span>        <span class="string">    Each character is converted to its ASCII code, and the code is then</span>
<span id="line90">90</span>        <span class="string">    turned into an 8 bit string. The bit strings for all characters</span>
<span id="line91">91</span>        <span class="string">    in the message are appended together to form the final result.</span>
<span id="line92">92</span>        <span class="string"></span>
<span id="line93">93</span>        <span class="string">    INPUTS:</span>
<span id="line94">94</span>        <span class="string"></span>
<span id="line95">95</span>        <span class="string">        message: a string of ASCII characters.</span>
<span id="line96">96</span>        <span class="string"></span>
<span id="line97">97</span>        <span class="string">    RESULT:</span>
<span id="line98">98</span>        <span class="string"></span>
<span id="line99">99</span>        <span class="string">        A string of bits: &#x27;0&#x27;s and &#x27;1&#x27;s.</span>
<span id="line100">100</span>       <span class="string"></span>
<span id="line101">101</span>       <span class="string">    EXAMPLES:</span>
<span id="line102">102</span>       <span class="string"></span>
<span id="line103">103</span>       <span class="string">        &gt;&gt;&gt; message_to_bits(&#x27;&#x27;)</span>
<span id="line104">104</span>       <span class="string">        &#x27;&#x27;</span>
<span id="line105">105</span>       <span class="string">        &gt;&gt;&gt; message_to_bits(&#x27;abc 123&#x27;)</span>
<span id="line106">106</span>       <span class="string">        &#x27;01100001011000100110001100100000001100010011001000110011&#x27;</span>
<span id="line107">107</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line108">108</span>           <span class="comment"># Convert each character to an 8 bit byte, and append them all together</span>
<span id="line109">109</span>           <span class="comment"># in order.</span>
<span id="line110">110</span>           <span class="variable">result</span> <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>
<span id="line111">111</span>           <span class="keyword">for</span> <span class="variable">char</span> <span class="keyword">in</span> <span class="variable">message</span><span class="operator">:</span>
<span id="line112">112</span>               <span class="variable">result</span> <span class="operator">+=</span> <span class="variable">char_to_bits</span><span class="operator">(</span><span class="variable">char</span><span class="operator">)</span>
<span id="line113">113</span>           <span class="keyword">return</span> <span class="variable">result</span>
<span id="line114">114</span>       
<span id="line115">115</span>       
<span id="line116">116</span>       <span class="comment"># Eight zero bits, indicates the end of the encoded message</span>
<span id="line117">117</span>       <span class="variable">ZERO_BYTE</span> <span class="operator">=</span> <span class="string">&#x27;00000000&#x27;</span>
<span id="line118">118</span>       <span class="comment"># Number of bits in a byte, we assume ASCII characters are represented</span>
<span id="line119">119</span>       <span class="comment"># in this many bits.</span>
<span id="line120">120</span>       <span class="variable">BYTE_SIZE</span> <span class="operator">=</span> <span class="number">8</span>
<span id="line121">121</span>       
<span id="line122">122</span>       
<span id="line123">123</span>       <span class="keyword">def</span> <span class="variable">bits_to_message</span><span class="operator">(</span><span class="variable">bits</span><span class="operator">)</span><span class="operator">:</span>
<span id="line124">124</span>           <span class="string">&#x27;&#x27;&#x27;Convert a string of bits into a string of ASCII characters.</span>
<span id="line125">125</span>       <span class="string"></span>
<span id="line126">126</span>       <span class="string">    The input is decoded in 8 bit chunks. Each chunk is converted</span>
<span id="line127">127</span>       <span class="string">    into an integer, and that integer is then converted to</span>
<span id="line128">128</span>       <span class="string">    an ASCII character. The integer is taken to be the ASCII code</span>
<span id="line129">129</span>       <span class="string">    of the character.</span>
<span id="line130">130</span>       <span class="string"></span>
<span id="line131">131</span>       <span class="string">    We stop decoding if:</span>
<span id="line132">132</span>       <span class="string">        - there are fewer than 8 bits left in the input.</span>
<span id="line133">133</span>       <span class="string">        - we encounter a sequence of 8 zero bits.</span>
<span id="line134">134</span>       <span class="string"></span>
<span id="line135">135</span>       <span class="string">    INPUTS:</span>
<span id="line136">136</span>       <span class="string"></span>
<span id="line137">137</span>       <span class="string">        bits: A string of bits: &#x27;0&#x27;s and &#x27;1&#x27;s</span>
<span id="line138">138</span>       <span class="string"></span>
<span id="line139">139</span>       <span class="string">    RESULT:</span>
<span id="line140">140</span>       <span class="string"></span>
<span id="line141">141</span>       <span class="string">        A string of ASCII characters.</span>
<span id="line142">142</span>       <span class="string"></span>
<span id="line143">143</span>       <span class="string">    EXAMPLES:</span>
<span id="line144">144</span>       <span class="string"></span>
<span id="line145">145</span>       <span class="string">        &gt;&gt;&gt; bits_to_message(&#x27;&#x27;)</span>
<span id="line146">146</span>       <span class="string">        &#x27;&#x27;</span>
<span id="line147">147</span>       <span class="string">        &gt;&gt;&gt; bits_to_message(&#x27;0100000&#x27;)</span>
<span id="line148">148</span>       <span class="string">        &#x27;&#x27;</span>
<span id="line149">149</span>       <span class="string">        # Observere truncation of message due to insufficient bits</span>
<span id="line150">150</span>       <span class="string">        &gt;&gt;&gt; bits_to_message(&#x27;011010000110010101&#x27;)</span>
<span id="line151">151</span>       <span class="string">        &#x27;he&#x27;</span>
<span id="line152">152</span>       <span class="string">        &gt;&gt;&gt; bits_to_message(&#x27;0110100001100101011011000110110001101111&#x27;)</span>
<span id="line153">153</span>       <span class="string">        &#x27;hello&#x27;</span>
<span id="line154">154</span>       <span class="string">        # Observe the truncation of the message due to zero byte</span>
<span id="line155">155</span>       <span class="string">        &gt;&gt;&gt; bits_to_message(&#x27;011010000110010101101100000000000110110001101111&#x27;)</span>
<span id="line156">156</span>       <span class="string">        &#x27;hel&#x27;</span>
<span id="line157">157</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line158">158</span>           <span class="variable">result</span> <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>
<span id="line159">159</span>           <span class="keyword">while</span> <span class="variable">bits</span><span class="operator">:</span>
<span id="line160">160</span>               <span class="comment"># Grab the next 8 bit chunk</span>
<span id="line161">161</span>               <span class="variable">next_chunk</span> <span class="operator">=</span> <span class="variable">bits</span><span class="operator">[</span><span class="operator">:</span><span class="variable">BYTE_SIZE</span><span class="operator">]</span>
<span id="line162">162</span>               <span class="comment"># Check if the next chunk is 8 bits long and not</span>
<span id="line163">163</span>               <span class="comment"># the zero byte.</span>
<span id="line164">164</span>               <span class="keyword">if</span> <span class="variable">len</span><span class="operator">(</span><span class="variable">next_chunk</span><span class="operator">)</span> <span class="operator">==</span> <span class="variable">BYTE_SIZE</span> <span class="keyword">and</span> <span class="variable">next_chunk</span> <span class="operator">!=</span> <span class="variable">ZERO_BYTE</span><span class="operator">:</span>
<span id="line165">165</span>                   <span class="comment"># Convert this chunk into an ASCII character</span>
<span id="line166">166</span>                   <span class="variable">result</span> <span class="operator">+=</span> <span class="variable">bits_to_char</span><span class="operator">(</span><span class="variable">next_chunk</span><span class="operator">)</span>
<span id="line167">167</span>                   <span class="comment"># Move on to the rest of the bits after the chunk</span>
<span id="line168">168</span>                   <span class="variable">bits</span> <span class="operator">=</span> <span class="variable">bits</span><span class="operator">[</span><span class="variable">BYTE_SIZE</span><span class="operator">:</span><span class="operator">]</span>
<span id="line169">169</span>               <span class="keyword">else</span><span class="operator">:</span>
<span id="line170">170</span>                   <span class="comment"># Stop decoding the bits.</span>
<span id="line171">171</span>                   <span class="comment"># We either ran out of bits, or we hit the zero byte.</span>
<span id="line172">172</span>                   <span class="keyword">break</span>
<span id="line173">173</span>           <span class="keyword">return</span> <span class="variable">result</span>
<span id="line174">174</span>       
<span id="line175">175</span>       
<span id="line176">176</span>       <span class="keyword">def</span> <span class="variable">get_message_bit</span><span class="operator">(</span><span class="variable">bits</span><span class="operator">,</span> <span class="variable">index</span><span class="operator">)</span><span class="operator">:</span>
<span id="line177">177</span>           <span class="string">&#x27;&#x27;&#x27;Get the bit at a given position within a string of bits.</span>
<span id="line178">178</span>       <span class="string">    If the position is out of bounds, return &#x27;0&#x27;.</span>
<span id="line179">179</span>       <span class="string"></span>
<span id="line180">180</span>       <span class="string">    INPUTS:</span>
<span id="line181">181</span>       <span class="string"></span>
<span id="line182">182</span>       <span class="string">        bits:  A possibly empty string of bits: &#x27;0&#x27;s and &#x27;1&#x27;s.</span>
<span id="line183">183</span>       <span class="string"></span>
<span id="line184">184</span>       <span class="string">        index: A integer index (may be outside the bounds of</span>
<span id="line185">185</span>       <span class="string">               the bit string).</span>
<span id="line186">186</span>       <span class="string"></span>
<span id="line187">187</span>       <span class="string">    RESULT:</span>
<span id="line188">188</span>       <span class="string"></span>
<span id="line189">189</span>       <span class="string">        A single bit as a string. If the index is within the bounds</span>
<span id="line190">190</span>       <span class="string">        of bits then the result is bits[index], otherwise the</span>
<span id="line191">191</span>       <span class="string">        result is &#x27;0&#x27;.</span>
<span id="line192">192</span>       <span class="string"></span>
<span id="line193">193</span>       <span class="string">    EXAMPLES:</span>
<span id="line194">194</span>       <span class="string"></span>
<span id="line195">195</span>       <span class="string">        &gt;&gt;&gt; get_message_bit(&#x27;&#x27;, 0)</span>
<span id="line196">196</span>       <span class="string">        &#x27;0&#x27;</span>
<span id="line197">197</span>       <span class="string">        &gt;&gt;&gt; get_message_bit(&#x27;1011&#x27;, 0)</span>
<span id="line198">198</span>       <span class="string">        &#x27;1&#x27;</span>
<span id="line199">199</span>       <span class="string">        &gt;&gt;&gt; get_message_bit(&#x27;1011&#x27;, 1)</span>
<span id="line200">200</span>       <span class="string">        &#x27;0&#x27;</span>
<span id="line201">201</span>       <span class="string">        &gt;&gt;&gt; get_message_bit(&#x27;1011&#x27;, 2)</span>
<span id="line202">202</span>       <span class="string">        &#x27;1&#x27;</span>
<span id="line203">203</span>       <span class="string">        &gt;&gt;&gt; get_message_bit(&#x27;1011&#x27;, 3)</span>
<span id="line204">204</span>       <span class="string">        &#x27;1&#x27;</span>
<span id="line205">205</span>       <span class="string">        # Note the index is out of range:</span>
<span id="line206">206</span>       <span class="string">        &gt;&gt;&gt; get_message_bit(&#x27;1011&#x27;, 4)</span>
<span id="line207">207</span>       <span class="string">        &#x27;0&#x27;</span>
<span id="line208">208</span>       <span class="string">        # Note the index is out of range:</span>
<span id="line209">209</span>       <span class="string">        &gt;&gt;&gt; get_message_bit(&#x27;1011&#x27;, -1)</span>
<span id="line210">210</span>       <span class="string">        &#x27;0&#x27;</span>
<span id="line211">211</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line212">212</span>           <span class="keyword">if</span> <span class="variable">index</span> <span class="operator">&lt;</span> <span class="number">0</span> <span class="keyword">or</span> <span class="variable">index</span> <span class="operator">&gt;=</span> <span class="variable">len</span><span class="operator">(</span><span class="variable">bits</span><span class="operator">)</span><span class="operator">:</span>
<span id="line213">213</span>               <span class="keyword">return</span> <span class="string">&#x27;0&#x27;</span>
<span id="line214">214</span>           <span class="keyword">else</span><span class="operator">:</span>
<span id="line215">215</span>               <span class="keyword">return</span> <span class="variable">bits</span><span class="operator">[</span><span class="variable">index</span><span class="operator">]</span>
<span id="line216">216</span>       
<span id="line217">217</span>       <span class="comment"># Index of the least significant bit in a sequence of bits.</span>
<span id="line218">218</span>       <span class="variable">LSB_POS</span> <span class="operator">=</span> <span class="number">0</span>
<span id="line219">219</span>       
<span id="line220">220</span>       
<span id="line221">221</span>       <span class="keyword">def</span> <span class="variable">encode</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">message</span><span class="operator">)</span><span class="operator">:</span>
<span id="line222">222</span>           <span class="string">&#x27;&#x27;&#x27;Embed a message within an image.</span>
<span id="line223">223</span>       <span class="string"></span>
<span id="line224">224</span>       <span class="string">    This is done by turning the message into a sequence of bits.</span>
<span id="line225">225</span>       <span class="string">    Each bit from the message is then set as the least significant</span>
<span id="line226">226</span>       <span class="string">    bit (LSB) in a corresponding pixel intensity value.</span>
<span id="line227">227</span>       <span class="string"></span>
<span id="line228">228</span>       <span class="string">    The message can be decoded from the image using the decode</span>
<span id="line229">229</span>       <span class="string">    function below.</span>
<span id="line230">230</span>       <span class="string"></span>
<span id="line231">231</span>       <span class="string">    If there are NUM_INTENSITY values in the image then</span>
<span id="line232">232</span>       <span class="string">    the following equality holds for all messages (using integer</span>
<span id="line233">233</span>       <span class="string">    division):</span>
<span id="line234">234</span>       <span class="string"></span>
<span id="line235">235</span>       <span class="string">        NUM_ENCODED_CHARS = NUM_INTENSITY_VALUES / 8</span>
<span id="line236">236</span>       <span class="string">        decode(encode(image, message)) == message[:NUM_ENCODED_CHARS]</span>
<span id="line237">237</span>       <span class="string"></span>
<span id="line238">238</span>       <span class="string">    That is to say that the result of decoding an encoded image should</span>
<span id="line239">239</span>       <span class="string">    be equal to a prefix of the original message. The exact length</span>
<span id="line240">240</span>       <span class="string">    of the prefix depends on the number of intensity values in the</span>
<span id="line241">241</span>       <span class="string">    image, which determines how many characters can be stored.</span>
<span id="line242">242</span>       <span class="string"></span>
<span id="line243">243</span>       <span class="string">    INPUTS:</span>
<span id="line244">244</span>       <span class="string"></span>
<span id="line245">245</span>       <span class="string">        image: A rectangular lists of lists of pixel intensities.</span>
<span id="line246">246</span>       <span class="string">               Pixels are 3-element tuples of integer intensity values</span>
<span id="line247">247</span>       <span class="string">               in the range [0,255] inclusive.</span>
<span id="line248">248</span>       <span class="string"></span>
<span id="line249">249</span>       <span class="string">        message: A possibly empty string of ASCII characters.</span>
<span id="line250">250</span>       <span class="string"></span>
<span id="line251">251</span>       <span class="string">    RESULT:</span>
<span id="line252">252</span>       <span class="string"></span>
<span id="line253">253</span>       <span class="string">    An image in the same format as the input image. The output image</span>
<span id="line254">254</span>       <span class="string">    contains as many bits as possible from the input message,</span>
<span id="line255">255</span>       <span class="string">    encoded in the LSBs of the pixel intensities.</span>
<span id="line256">256</span>       <span class="string"></span>
<span id="line257">257</span>       <span class="string">    EXAMPLE:</span>
<span id="line258">258</span>       <span class="string"></span>
<span id="line259">259</span>       <span class="string">    &gt;&gt;&gt; test_image = [[(15, 103, 255), (0, 3, 19)],</span>
<span id="line260">260</span>       <span class="string">                     [(22, 200, 1), (8, 8, 8)],</span>
<span id="line261">261</span>       <span class="string">                     [(0, 0, 0), (5, 123, 19)]]</span>
<span id="line262">262</span>       <span class="string">    &gt;&gt;&gt; encode(test_image, &quot;hello&quot;)</span>
<span id="line263">263</span>       <span class="string">    [[(14, 103, 255), (0, 3, 18)], [(22, 200, 0), (9, 9, 8)],</span>
<span id="line264">264</span>       <span class="string">     [(0, 1, 0), (5, 122, 19)]]</span>
<span id="line265">265</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line266">266</span>           <span class="comment"># Convert the entire message to a string of bits</span>
<span id="line267">267</span>           <span class="variable">message_bits</span> <span class="operator">=</span> <span class="variable">message_to_bits</span><span class="operator">(</span><span class="variable">message</span><span class="operator">)</span>
<span id="line268">268</span>           <span class="comment"># The position of the next bit in the message to encode</span>
<span id="line269">269</span>           <span class="variable">msg_bit_pos</span> <span class="operator">=</span> <span class="number">0</span>
<span id="line270">270</span>           <span class="comment"># Construct a new image, one row at a time</span>
<span id="line271">271</span>           <span class="variable">new_image</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">]</span>
<span id="line272">272</span>           <span class="keyword">for</span> <span class="variable">row</span> <span class="keyword">in</span> <span class="variable">image</span><span class="operator">:</span>
<span id="line273">273</span>               <span class="variable">new_row</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">]</span>
<span id="line274">274</span>               <span class="keyword">for</span> <span class="variable">pixel</span> <span class="keyword">in</span> <span class="variable">row</span><span class="operator">:</span>
<span id="line275">275</span>                   <span class="comment"># Build a new pixel as a list so we can append</span>
<span id="line276">276</span>                   <span class="comment"># intensity values onto it. We turn it back into a tuple</span>
<span id="line277">277</span>                   <span class="comment"># just before adding it to the new row.</span>
<span id="line278">278</span>                   <span class="variable">new_pixel</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">]</span>
<span id="line279">279</span>                   <span class="keyword">for</span> <span class="variable">intensity</span> <span class="keyword">in</span> <span class="variable">pixel</span><span class="operator">:</span>
<span id="line280">280</span>                       <span class="comment"># Get the next bit from the message (will be &#x27;0&#x27; if</span>
<span id="line281">281</span>                       <span class="comment"># we run past the end).</span>
<span id="line282">282</span>                       <span class="variable">next_bit</span> <span class="operator">=</span> <span class="variable">get_message_bit</span><span class="operator">(</span><span class="variable">message_bits</span><span class="operator">,</span> <span class="variable">msg_bit_pos</span><span class="operator">)</span>
<span id="line283">283</span>                       <span class="comment"># Set the LSB of the next intensity value to be equal</span>
<span id="line284">284</span>                       <span class="comment"># to the next bit.</span>
<span id="line285">285</span>                       <span class="variable">new_intensity</span> <span class="operator">=</span> <span class="variable">set_bit</span><span class="operator">(</span><span class="variable">intensity</span><span class="operator">,</span> <span class="variable">next_bit</span><span class="operator">,</span> <span class="variable">LSB_POS</span><span class="operator">)</span>
<span id="line286">286</span>                       <span class="variable">new_pixel</span><span class="operator">.</span><span class="variable">append</span><span class="operator">(</span><span class="variable">new_intensity</span><span class="operator">)</span>
<span id="line287">287</span>                       <span class="comment"># Move onto the next bit.</span>
<span id="line288">288</span>                       <span class="variable">msg_bit_pos</span> <span class="operator">+=</span> <span class="number">1</span>
<span id="line289">289</span>                   <span class="comment"># Turn the pixel into a tuple and then add it to the next row</span>
<span id="line290">290</span>                   <span class="variable">new_row</span><span class="operator">.</span><span class="variable">append</span><span class="operator">(</span><span class="variable">tuple</span><span class="operator">(</span><span class="variable">new_pixel</span><span class="operator">)</span><span class="operator">)</span>
<span id="line291">291</span>               <span class="variable">new_image</span><span class="operator">.</span><span class="variable">append</span><span class="operator">(</span><span class="variable">new_row</span><span class="operator">)</span>
<span id="line292">292</span>           <span class="keyword">return</span> <span class="variable">new_image</span>
<span id="line293">293</span>       
<span id="line294">294</span>       
<span id="line295">295</span>       <span class="keyword">def</span> <span class="variable">decode</span><span class="operator">(</span><span class="variable">image</span><span class="operator">)</span><span class="operator">:</span>
<span id="line296">296</span>           <span class="string">&#x27;&#x27;&#x27;Retrieve an encoded message from an image.</span>
<span id="line297">297</span>       <span class="string"></span>
<span id="line298">298</span>       <span class="string">    The input image is assumed to have a message encoded in its LSBs according</span>
<span id="line299">299</span>       <span class="string">    to the scheme implemented by the encode function. See the comments on</span>
<span id="line300">300</span>       <span class="string">    encode for more detailed information.</span>
<span id="line301">301</span>       <span class="string"></span>
<span id="line302">302</span>       <span class="string">    INPUTS:</span>
<span id="line303">303</span>       <span class="string"></span>
<span id="line304">304</span>       <span class="string">        image: A rectangular lists of lists of pixel intensities.</span>
<span id="line305">305</span>       <span class="string">               Pixels are 3-element tuples of integer intensity values</span>
<span id="line306">306</span>       <span class="string">               in the range [0,255] inclusive.</span>
<span id="line307">307</span>       <span class="string"></span>
<span id="line308">308</span>       <span class="string">    RESULT:</span>
<span id="line309">309</span>       <span class="string"></span>
<span id="line310">310</span>       <span class="string">        A possibly empty string of ASCII characters.</span>
<span id="line311">311</span>       <span class="string"></span>
<span id="line312">312</span>       <span class="string">    EXAMPLE:</span>
<span id="line313">313</span>       <span class="string">    &gt;&gt;&gt; test_image = [[(15, 103, 255), (0, 3, 19)],</span>
<span id="line314">314</span>       <span class="string">                      [(22, 200, 1), (8, 8, 8)],</span>
<span id="line315">315</span>       <span class="string">                      [(0, 0, 0), (5, 123, 19)]]</span>
<span id="line316">316</span>       <span class="string">    # Note that the image is not large enough to encode the whole message</span>
<span id="line317">317</span>       <span class="string">    &gt;&gt;&gt; decode(encode(test_image, &#x27;hello&#x27;))</span>
<span id="line318">318</span>       <span class="string">    &#x27;he&#x27;</span>
<span id="line319">319</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line320">320</span>           <span class="comment"># Collect all the LSBs of each intensity value as one long string</span>
<span id="line321">321</span>           <span class="comment"># of bits, then decode back to a string of ASCII characters.</span>
<span id="line322">322</span>           <span class="variable">message_bits</span> <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>
<span id="line323">323</span>           <span class="keyword">for</span> <span class="variable">row</span> <span class="keyword">in</span> <span class="variable">image</span><span class="operator">:</span>
<span id="line324">324</span>               <span class="keyword">for</span> <span class="variable">pixel</span> <span class="keyword">in</span> <span class="variable">row</span><span class="operator">:</span>
<span id="line325">325</span>                   <span class="keyword">for</span> <span class="variable">intensity</span> <span class="keyword">in</span> <span class="variable">pixel</span><span class="operator">:</span>
<span id="line326">326</span>                       <span class="variable">message_bits</span> <span class="operator">+=</span> <span class="variable">get_bit</span><span class="operator">(</span><span class="variable">intensity</span><span class="operator">,</span> <span class="variable">LSB_POS</span><span class="operator">)</span>
<span id="line327">327</span>           <span class="keyword">return</span> <span class="variable">bits_to_message</span><span class="operator">(</span><span class="variable">message_bits</span><span class="operator">)</span>
<span id="line328">328</span>       
<span id="line329">329</span>       <span class="comment">###############################################################################</span>
<span id="line330">330</span>       <span class="comment"># Bonus task</span>
<span id="line331">331</span>       <span class="comment">#</span>
<span id="line332">332</span>       <span class="comment"># The bonus task is a generalisation of the encoding scheme above, where</span>
<span id="line333">333</span>       <span class="comment"># we allow the bottom N bits of each intensity value to encode the next N bits</span>
<span id="line334">334</span>       <span class="comment"># from the message. When N == 1 the schemes are identical.</span>
<span id="line335">335</span>       <span class="comment">#</span>
<span id="line336">336</span>       <span class="comment">###############################################################################</span>
<span id="line337">337</span>       
<span id="line338">338</span>       
<span id="line339">339</span>       <span class="keyword">def</span> <span class="variable">get_message_bits</span><span class="operator">(</span><span class="variable">bits</span><span class="operator">,</span> <span class="variable">index</span><span class="operator">,</span> <span class="variable">num_bits</span><span class="operator">)</span><span class="operator">:</span>
<span id="line340">340</span>           <span class="string">&#x27;&#x27;&#x27;Get a sequence of bits of length num_bits at a given position within</span>
<span id="line341">341</span>       <span class="string">    a string of bits. The result is padded with &#x27;0&#x27;s if the requested</span>
<span id="line342">342</span>       <span class="string">    sequence runs over the end of the input string of bits.</span>
<span id="line343">343</span>       <span class="string"></span>
<span id="line344">344</span>       <span class="string">    INPUTS:</span>
<span id="line345">345</span>       <span class="string"></span>
<span id="line346">346</span>       <span class="string">        bits:  A possibly empty string of bits: &#x27;0&#x27;s and &#x27;1&#x27;s.</span>
<span id="line347">347</span>       <span class="string"></span>
<span id="line348">348</span>       <span class="string">        index: A integer index (may be outside the bounds of</span>
<span id="line349">349</span>       <span class="string">               the bit string.</span>
<span id="line350">350</span>       <span class="string"></span>
<span id="line351">351</span>       <span class="string">        num_bits: A positive integer indicating the number of bits requested.</span>
<span id="line352">352</span>       <span class="string"></span>
<span id="line353">353</span>       <span class="string">    RESULT:</span>
<span id="line354">354</span>       <span class="string"></span>
<span id="line355">355</span>       <span class="string">        A bit string of length num_bits.</span>
<span id="line356">356</span>       <span class="string"></span>
<span id="line357">357</span>       <span class="string">    EXAMPLES:</span>
<span id="line358">358</span>       <span class="string"></span>
<span id="line359">359</span>       <span class="string">        &gt;&gt;&gt; get_message_bits(&#x27;&#x27;, 0, 3)</span>
<span id="line360">360</span>       <span class="string">        &#x27;000&#x27;</span>
<span id="line361">361</span>       <span class="string">        &gt;&gt;&gt; get_message_bits(&#x27;0110011&#x27;, 0, 3)</span>
<span id="line362">362</span>       <span class="string">        &#x27;011&#x27;</span>
<span id="line363">363</span>       <span class="string">        &gt;&gt;&gt; get_message_bits(&#x27;0110011&#x27;, 1, 3)</span>
<span id="line364">364</span>       <span class="string">        &#x27;110&#x27;</span>
<span id="line365">365</span>       <span class="string">        &gt;&gt;&gt; get_message_bits(&#x27;0110011&#x27;, 2, 3)</span>
<span id="line366">366</span>       <span class="string">        &#x27;100&#x27;</span>
<span id="line367">367</span>       <span class="string">        &gt;&gt;&gt; get_message_bits(&#x27;0110011&#x27;, 3, 3)</span>
<span id="line368">368</span>       <span class="string">        &#x27;001&#x27;</span>
<span id="line369">369</span>       <span class="string">        &gt;&gt;&gt; get_message_bits(&#x27;0110011&#x27;, 4, 3)</span>
<span id="line370">370</span>       <span class="string">        &#x27;011&#x27;</span>
<span id="line371">371</span>       <span class="string">        &gt;&gt;&gt; get_message_bits(&#x27;0110011&#x27;, 5, 3)</span>
<span id="line372">372</span>       <span class="string">        &#x27;110&#x27;</span>
<span id="line373">373</span>       <span class="string">        &gt;&gt;&gt; get_message_bits(&#x27;0110011&#x27;, 6, 3)</span>
<span id="line374">374</span>       <span class="string">        &#x27;100&#x27;</span>
<span id="line375">375</span>       <span class="string">        &gt;&gt;&gt; get_message_bits(&#x27;0110011&#x27;, 7, 3)</span>
<span id="line376">376</span>       <span class="string">        &#x27;000&#x27;</span>
<span id="line377">377</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line378">378</span>           <span class="comment"># We call upon the get_message_bit function</span>
<span id="line379">379</span>           <span class="comment"># num_bits in a row. The get_message_bit function handles the</span>
<span id="line380">380</span>           <span class="comment"># situation where the index falls outside the bounds of</span>
<span id="line381">381</span>           <span class="comment"># the bit string, thus padding with &#x27;0&#x27;s as necessary.</span>
<span id="line382">382</span>           <span class="variable">result</span> <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>
<span id="line383">383</span>           <span class="keyword">for</span> <span class="variable">bit_index</span> <span class="keyword">in</span> <span class="variable">range</span><span class="operator">(</span><span class="variable">index</span><span class="operator">,</span> <span class="variable">index</span> <span class="operator">+</span> <span class="variable">num_bits</span><span class="operator">)</span><span class="operator">:</span>
<span id="line384">384</span>               <span class="variable">result</span> <span class="operator">+=</span> <span class="variable">get_message_bit</span><span class="operator">(</span><span class="variable">bits</span><span class="operator">,</span> <span class="variable">bit_index</span><span class="operator">)</span>
<span id="line385">385</span>           <span class="keyword">return</span> <span class="variable">result</span>
<span id="line386">386</span>       
<span id="line387">387</span>       
<span id="line388">388</span>       <span class="keyword">def</span> <span class="variable">encode_ext</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">message</span><span class="operator">,</span> <span class="variable">num_bits</span><span class="operator">)</span><span class="operator">:</span>
<span id="line389">389</span>           <span class="string">&#x27;&#x27;&#x27;Embed a message within an image.</span>
<span id="line390">390</span>       <span class="string"></span>
<span id="line391">391</span>       <span class="string">    This is done by turning the message into a sequence of bits.</span>
<span id="line392">392</span>       <span class="string">    Each sequence of num_bits from the message is then set as</span>
<span id="line393">393</span>       <span class="string">    bottom num_bits of each intensity value in the image.</span>
<span id="line394">394</span>       <span class="string"></span>
<span id="line395">395</span>       <span class="string">    The message can be decoded from the image using the decode_ext</span>
<span id="line396">396</span>       <span class="string">    function below.</span>
<span id="line397">397</span>       <span class="string"></span>
<span id="line398">398</span>       <span class="string">    If there are NUM_INTENSITY values in the image then</span>
<span id="line399">399</span>       <span class="string">    the following equality holds for all messages (using integer</span>
<span id="line400">400</span>       <span class="string">    division):</span>
<span id="line401">401</span>       <span class="string"></span>
<span id="line402">402</span>       <span class="string">        NUM_ENCODED_CHARS = NUM_INTENSITY_VALUES * num_bits / 8</span>
<span id="line403">403</span>       <span class="string">        decode_ext(encode_ext(image, message)) == message[:NUM_ENCODED_CHARS]</span>
<span id="line404">404</span>       <span class="string"></span>
<span id="line405">405</span>       <span class="string">    That is to say that the result of decoding an encoded image should</span>
<span id="line406">406</span>       <span class="string">    be equal to a prefix of the original message. The exact length</span>
<span id="line407">407</span>       <span class="string">    of the prefix depends on the number of intensity values in the</span>
<span id="line408">408</span>       <span class="string">    image and the number of bits encoded in each intensity value</span>
<span id="line409">409</span>       <span class="string">    (num_bits) which determines how many characters can be stored.</span>
<span id="line410">410</span>       <span class="string"></span>
<span id="line411">411</span>       <span class="string">    INPUTS:</span>
<span id="line412">412</span>       <span class="string"></span>
<span id="line413">413</span>       <span class="string">        image: A rectangular lists of lists of pixel intensities.</span>
<span id="line414">414</span>       <span class="string">               Pixels are 3-element tuples of integer intensity values</span>
<span id="line415">415</span>       <span class="string">               in the range [0,255] inclusive.</span>
<span id="line416">416</span>       <span class="string"></span>
<span id="line417">417</span>       <span class="string">        message: A possibly empty string of ASCII characters.</span>
<span id="line418">418</span>       <span class="string"></span>
<span id="line419">419</span>       <span class="string">        num_bits: The number of bottom (least significant) bits</span>
<span id="line420">420</span>       <span class="string">                  to use for encoding the message in each intensity</span>
<span id="line421">421</span>       <span class="string">                  value.</span>
<span id="line422">422</span>       <span class="string"></span>
<span id="line423">423</span>       <span class="string">    RESULT:</span>
<span id="line424">424</span>       <span class="string"></span>
<span id="line425">425</span>       <span class="string">    An image in the same format as the input image. The output image</span>
<span id="line426">426</span>       <span class="string">    contains as many bits as possible from the input message,</span>
<span id="line427">427</span>       <span class="string">    encoded in the bottom num_bits of the pixel intensities.</span>
<span id="line428">428</span>       <span class="string"></span>
<span id="line429">429</span>       <span class="string">    EXAMPLE:</span>
<span id="line430">430</span>       <span class="string"></span>
<span id="line431">431</span>       <span class="string">    &gt;&gt;&gt; test_image = [[(15, 103, 255), (0, 3, 19)],</span>
<span id="line432">432</span>       <span class="string">                     [(22, 200, 1), (8, 8, 8)],</span>
<span id="line433">433</span>       <span class="string">                     [(0, 0, 0), (5, 123, 19)]]</span>
<span id="line434">434</span>       <span class="string">    &gt;&gt;&gt; encode_ext(test_image, &quot;hello&quot;, 2)</span>
<span id="line435">435</span>       <span class="string">    [[(14, 101, 253), (0, 2, 17)], [(22, 202, 2), (9, 11, 8)],</span>
<span id="line436">436</span>       <span class="string">     [(2, 1, 3), (4, 122, 17)]]</span>
<span id="line437">437</span>       <span class="string">    &gt;&gt;&gt; encode_ext(test_image, &quot;hello&quot;, 8)</span>
<span id="line438">438</span>       <span class="string">    [[(22, 166, 54), (54, 246, 0)], [(0, 0, 0), (0, 0, 0)],</span>
<span id="line439">439</span>       <span class="string">     [(0, 0, 0), (0, 0, 0)]</span>
<span id="line440">440</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line441">441</span>           <span class="comment"># Turn the whole message into a sequence of bits</span>
<span id="line442">442</span>           <span class="variable">message_bits</span> <span class="operator">=</span> <span class="variable">message_to_bits</span><span class="operator">(</span><span class="variable">message</span><span class="operator">)</span>
<span id="line443">443</span>           <span class="comment"># The position of the next bit sequence in the message to encode</span>
<span id="line444">444</span>           <span class="variable">msg_bit_pos</span> <span class="operator">=</span> <span class="number">0</span>
<span id="line445">445</span>           <span class="comment"># Construct a new image, one row at a time</span>
<span id="line446">446</span>           <span class="variable">new_image</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">]</span>
<span id="line447">447</span>           <span class="keyword">for</span> <span class="variable">row</span> <span class="keyword">in</span> <span class="variable">image</span><span class="operator">:</span>
<span id="line448">448</span>               <span class="variable">new_row</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">]</span>
<span id="line449">449</span>               <span class="keyword">for</span> <span class="variable">pixel</span> <span class="keyword">in</span> <span class="variable">row</span><span class="operator">:</span>
<span id="line450">450</span>                   <span class="comment"># Build a new pixel as a list so we can append</span>
<span id="line451">451</span>                   <span class="comment"># intensity values onto it. We turn it back into a tuple</span>
<span id="line452">452</span>                   <span class="comment"># just before adding it to the new row.</span>
<span id="line453">453</span>                   <span class="variable">new_pixel</span> <span class="operator">=</span> <span class="operator">[</span><span class="operator">]</span>
<span id="line454">454</span>                   <span class="keyword">for</span> <span class="variable">intensity</span> <span class="keyword">in</span> <span class="variable">pixel</span><span class="operator">:</span>
<span id="line455">455</span>                       <span class="comment"># Get the next bit sequence from the message (will be padded</span>
<span id="line456">456</span>                       <span class="comment"># with &#x27;0&#x27;s if we run past the end).</span>
<span id="line457">457</span>                       <span class="variable">next_bits</span> <span class="operator">=</span> <span class="variable">get_message_bits</span><span class="operator">(</span><span class="variable">message_bits</span><span class="operator">,</span> <span class="variable">msg_bit_pos</span><span class="operator">,</span>
<span id="line458">458</span>                                                    <span class="variable">num_bits</span><span class="operator">)</span>
<span id="line459">459</span>                       <span class="comment"># Set the bottom num_bits of the next intensity value to be</span>
<span id="line460">460</span>                       <span class="comment"># equal to the next bit.</span>
<span id="line461">461</span>                       <span class="keyword">for</span> <span class="variable">pos</span><span class="operator">,</span> <span class="variable">next_bit</span> <span class="keyword">in</span> <span class="variable">enumerate</span><span class="operator">(</span><span class="variable">next_bits</span><span class="operator">)</span><span class="operator">:</span>
<span id="line462">462</span>                           <span class="variable">intensity</span> <span class="operator">=</span> <span class="variable">set_bit</span><span class="operator">(</span><span class="variable">intensity</span><span class="operator">,</span> <span class="variable">next_bit</span><span class="operator">,</span> <span class="variable">pos</span><span class="operator">)</span>
<span id="line463">463</span>                       <span class="variable">new_pixel</span><span class="operator">.</span><span class="variable">append</span><span class="operator">(</span><span class="variable">intensity</span><span class="operator">)</span>
<span id="line464">464</span>                       <span class="comment"># Move onto the next sequence of bits</span>
<span id="line465">465</span>                       <span class="variable">msg_bit_pos</span> <span class="operator">+=</span> <span class="variable">num_bits</span>
<span id="line466">466</span>                   <span class="comment"># Turn the pixel into a tuple and then add it to the next row</span>
<span id="line467">467</span>                   <span class="variable">new_row</span><span class="operator">.</span><span class="variable">append</span><span class="operator">(</span><span class="variable">tuple</span><span class="operator">(</span><span class="variable">new_pixel</span><span class="operator">)</span><span class="operator">)</span>
<span id="line468">468</span>               <span class="variable">new_image</span><span class="operator">.</span><span class="variable">append</span><span class="operator">(</span><span class="variable">new_row</span><span class="operator">)</span>
<span id="line469">469</span>           <span class="keyword">return</span> <span class="variable">new_image</span>
<span id="line470">470</span>       
<span id="line471">471</span>       
<span id="line472">472</span>       <span class="keyword">def</span> <span class="variable">decode_ext</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">num_bits</span><span class="operator">)</span><span class="operator">:</span>
<span id="line473">473</span>           <span class="string">&#x27;&#x27;&#x27;Retrieve an encoded message from an image.</span>
<span id="line474">474</span>       <span class="string"></span>
<span id="line475">475</span>       <span class="string">    The input image is assumed to have a message encoded in the bottom</span>
<span id="line476">476</span>       <span class="string">    num_bits according to the scheme implemented by the encode_ext function.</span>
<span id="line477">477</span>       <span class="string">    See the comments on encode_ext for more detailed information.</span>
<span id="line478">478</span>       <span class="string"></span>
<span id="line479">479</span>       <span class="string">    INPUTS:</span>
<span id="line480">480</span>       <span class="string"></span>
<span id="line481">481</span>       <span class="string">        image: A rectangular lists of lists of pixel intensities.</span>
<span id="line482">482</span>       <span class="string">               Pixels are 3-element tuples of integer intensity values</span>
<span id="line483">483</span>       <span class="string">               in the range [0,255] inclusive.</span>
<span id="line484">484</span>       <span class="string"></span>
<span id="line485">485</span>       <span class="string">        num_bits: The number of bottom (least significant) bits</span>
<span id="line486">486</span>       <span class="string">                  to use for encoding the message in each intensity</span>
<span id="line487">487</span>       <span class="string">                  value. It is important that the value of num_bits</span>
<span id="line488">488</span>       <span class="string">                  is used for both encode_ext and decode_ext.</span>
<span id="line489">489</span>       <span class="string"></span>
<span id="line490">490</span>       <span class="string">    RESULT:</span>
<span id="line491">491</span>       <span class="string"></span>
<span id="line492">492</span>       <span class="string">        A possibly empty string of ASCII characters.</span>
<span id="line493">493</span>       <span class="string"></span>
<span id="line494">494</span>       <span class="string">    EXAMPLE:</span>
<span id="line495">495</span>       <span class="string"></span>
<span id="line496">496</span>       <span class="string">    &gt;&gt;&gt; decode_ext(encode_ext(test_image, &#x27;hello&#x27;, 0), 0)</span>
<span id="line497">497</span>       <span class="string">    &#x27;&#x27;</span>
<span id="line498">498</span>       <span class="string">    &gt;&gt;&gt; decode_ext(encode_ext(test_image, &#x27;hello&#x27;, 1), 1)</span>
<span id="line499">499</span>       <span class="string">    &#x27;he&#x27;</span>
<span id="line500">500</span>       <span class="string">    &gt;&gt;&gt; decode_ext(encode_ext(test_image, &#x27;hello&#x27;, 2), 2)</span>
<span id="line501">501</span>       <span class="string">    &#x27;hell&#x27;</span>
<span id="line502">502</span>       <span class="string">    &gt;&gt;&gt; decode_ext(encode_ext(test_image, &#x27;hello&#x27;, 3), 3)</span>
<span id="line503">503</span>       <span class="string">    &#x27;hello&#x27;</span>
<span id="line504">504</span>       <span class="string">    &gt;&gt;&gt; decode_ext(encode_ext(test_image, &#x27;hello&#x27;, 4), 4)</span>
<span id="line505">505</span>       <span class="string">    &#x27;hello&#x27;</span>
<span id="line506">506</span>       <span class="string">    &gt;&gt;&gt; decode_ext(encode_ext(test_image, &#x27;hello&#x27;, 8), 8)</span>
<span id="line507">507</span>       <span class="string">    &#x27;hello&#x27;</span>
<span id="line508">508</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line509">509</span>           <span class="comment"># Collect all bottom num_bits of each intensity value as one long string</span>
<span id="line510">510</span>           <span class="comment"># of bits, then decode back to a string of ASCII characters.</span>
<span id="line511">511</span>           <span class="variable">message_bits</span> <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>
<span id="line512">512</span>           <span class="keyword">for</span> <span class="variable">row</span> <span class="keyword">in</span> <span class="variable">image</span><span class="operator">:</span>
<span id="line513">513</span>               <span class="keyword">for</span> <span class="variable">pixel</span> <span class="keyword">in</span> <span class="variable">row</span><span class="operator">:</span>
<span id="line514">514</span>                   <span class="keyword">for</span> <span class="variable">intensity</span> <span class="keyword">in</span> <span class="variable">pixel</span><span class="operator">:</span>
<span id="line515">515</span>                       <span class="comment"># Retrieve each of the bottom num_bits of the intensity value.</span>
<span id="line516">516</span>                       <span class="comment"># We must be careful to retrieve them in the same order that</span>
<span id="line517">517</span>                       <span class="comment"># they were set in encode_ext.</span>
<span id="line518">518</span>                       <span class="keyword">for</span> <span class="variable">pos</span> <span class="keyword">in</span> <span class="variable">range</span><span class="operator">(</span><span class="variable">num_bits</span><span class="operator">)</span><span class="operator">:</span>
<span id="line519">519</span>                           <span class="variable">message_bits</span> <span class="operator">+=</span> <span class="variable">get_bit</span><span class="operator">(</span><span class="variable">intensity</span><span class="operator">,</span> <span class="variable">pos</span><span class="operator">)</span>
<span id="line520">520</span>           <span class="keyword">return</span> <span class="variable">bits_to_message</span><span class="operator">(</span><span class="variable">message_bits</span><span class="operator">)</span>
<span id="line521">521</span>       
<span id="line522">522</span>       
<span id="line523">523</span>       <span class="comment">###############################################################################</span>
<span id="line524">524</span>       <span class="comment"># Automated testing</span>
<span id="line525">525</span>       <span class="comment">###############################################################################</span>
<span id="line526">526</span>       
<span id="line527">527</span>       <span class="keyword">def</span> <span class="variable">run_all_tests</span><span class="operator">(</span><span class="operator">)</span><span class="operator">:</span>
<span id="line528">528</span>           <span class="string">&#x27;&#x27;&#x27;Run all the test cases for each of the key functions.</span>
<span id="line529">529</span>       <span class="string">    Count and print the number of passes and failures.</span>
<span id="line530">530</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line531">531</span>           <span class="variable">tests</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line532">532</span>               <span class="variable">test_message_to_bits</span><span class="operator">(</span><span class="operator">)</span><span class="operator">,</span>
<span id="line533">533</span>               <span class="variable">test_bits_to_message</span><span class="operator">(</span><span class="operator">)</span><span class="operator">,</span>
<span id="line534">534</span>               <span class="variable">test_round_trip</span><span class="operator">(</span><span class="operator">)</span><span class="operator">,</span>
<span id="line535">535</span>               <span class="variable">test_encode_small</span><span class="operator">(</span><span class="operator">)</span><span class="operator">,</span>
<span id="line536">536</span>               <span class="variable">test_decode_small</span><span class="operator">(</span><span class="operator">)</span><span class="operator">,</span>
<span id="line537">537</span>               <span class="variable">test_encode_decode_file</span><span class="operator">(</span><span class="operator">)</span><span class="operator">,</span>
<span id="line538">538</span>               <span class="variable">test_encode_decode_ext_file</span><span class="operator">(</span><span class="operator">)</span>
<span id="line539">539</span>           <span class="operator">]</span>
<span id="line540">540</span>           <span class="variable">total_success</span><span class="operator">,</span> <span class="variable">total_fail</span> <span class="operator">=</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span>
<span id="line541">541</span>           <span class="keyword">for</span> <span class="variable">success</span><span class="operator">,</span> <span class="variable">fail</span> <span class="keyword">in</span> <span class="variable">tests</span><span class="operator">:</span>
<span id="line542">542</span>               <span class="variable">total_success</span> <span class="operator">+=</span> <span class="variable">success</span>
<span id="line543">543</span>               <span class="variable">total_fail</span> <span class="operator">+=</span> <span class="variable">fail</span>
<span id="line544">544</span>           <span class="variable">print</span><span class="operator">(</span><span class="string">&quot;{0} tests passed, {1} tests failed&quot;</span><span class="operator">.</span><span class="variable">format</span><span class="operator">(</span><span class="variable">total_success</span><span class="operator">,</span>
<span id="line545">545</span>                 <span class="variable">total_fail</span><span class="operator">)</span><span class="operator">)</span>
<span id="line546">546</span>       
<span id="line547">547</span>       
<span id="line548">548</span>       <span class="keyword">def</span> <span class="variable">run_test</span><span class="operator">(</span><span class="variable">function</span><span class="operator">,</span> <span class="variable">test_inputs</span><span class="operator">,</span> <span class="variable">expected_output</span><span class="operator">)</span><span class="operator">:</span>
<span id="line549">549</span>           <span class="string">&#x27;&#x27;&#x27;Call a function on a test input and check if the actual output</span>
<span id="line550">550</span>       <span class="string">    matches the expected output. Print whether the test passed or</span>
<span id="line551">551</span>       <span class="string">    failed.</span>
<span id="line552">552</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line553">553</span>           <span class="variable">function_name</span> <span class="operator">=</span> <span class="variable">function</span><span class="operator">.</span><span class="variable">__name__</span>
<span id="line554">554</span>           <span class="comment"># Print the test case.</span>
<span id="line555">555</span>           <span class="variable">print</span><span class="operator">(</span><span class="string">&quot;{0}({1})&quot;</span><span class="operator">.</span><span class="variable">format</span><span class="operator">(</span><span class="variable">function_name</span><span class="operator">,</span> <span class="string">&#x27;, &#x27;</span><span class="operator">.</span><span class="variable">join</span><span class="operator">(</span><span class="variable">map</span><span class="operator">(</span><span class="variable">repr</span><span class="operator">,</span> <span class="variable">test_inputs</span><span class="operator">)</span><span class="operator">)</span><span class="operator">)</span><span class="operator">)</span>
<span id="line556">556</span>           <span class="comment"># Run the test, save the result</span>
<span id="line557">557</span>           <span class="comment"># Note the use of * args to allow the testing of functions with</span>
<span id="line558">558</span>           <span class="comment"># any number of arguments.</span>
<span id="line559">559</span>           <span class="variable">actual_output</span> <span class="operator">=</span> <span class="variable">function</span><span class="operator">(</span><span class="operator">*</span><span class="variable">test_inputs</span><span class="operator">)</span>
<span id="line560">560</span>           <span class="comment"># Check if the actual output of the function is equal to</span>
<span id="line561">561</span>           <span class="comment"># the expected output.</span>
<span id="line562">562</span>           <span class="keyword">if</span> <span class="variable">actual_output</span> <span class="operator">!=</span> <span class="variable">expected_output</span><span class="operator">:</span>
<span id="line563">563</span>               <span class="variable">print</span><span class="operator">(</span><span class="string">&quot;\tfailed&quot;</span><span class="operator">)</span>
<span id="line564">564</span>               <span class="variable">print</span><span class="operator">(</span><span class="string">&quot;\tactual output: &quot;</span> <span class="operator">+</span> <span class="variable">str</span><span class="operator">(</span><span class="variable">actual_output</span><span class="operator">)</span><span class="operator">)</span>
<span id="line565">565</span>               <span class="variable">print</span><span class="operator">(</span><span class="string">&quot;\texpected output: &quot;</span> <span class="operator">+</span> <span class="variable">str</span><span class="operator">(</span><span class="variable">expected_output</span><span class="operator">)</span><span class="operator">)</span>
<span id="line566">566</span>               <span class="keyword">return</span> <span class="keyword">False</span>
<span id="line567">567</span>           <span class="keyword">else</span><span class="operator">:</span>
<span id="line568">568</span>               <span class="variable">print</span><span class="operator">(</span><span class="string">&quot;\tpassed&quot;</span><span class="operator">)</span>
<span id="line569">569</span>               <span class="keyword">return</span> <span class="keyword">True</span>
<span id="line570">570</span>       
<span id="line571">571</span>       
<span id="line572">572</span>       <span class="keyword">def</span> <span class="variable">run_tests</span><span class="operator">(</span><span class="variable">function</span><span class="operator">,</span> <span class="variable">tests</span><span class="operator">)</span><span class="operator">:</span>
<span id="line573">573</span>           <span class="string">&#x27;&#x27;&#x27;Run a function on a list of tests and return the number of successes</span>
<span id="line574">574</span>       <span class="string">    and failures.</span>
<span id="line575">575</span>       <span class="string">    &#x27;&#x27;&#x27;</span>
<span id="line576">576</span>           <span class="variable">success</span><span class="operator">,</span> <span class="variable">fail</span> <span class="operator">=</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span>
<span id="line577">577</span>           <span class="keyword">for</span> <span class="variable">test_inputs</span><span class="operator">,</span> <span class="variable">expected_output</span><span class="operator">,</span> <span class="keyword">in</span> <span class="variable">tests</span><span class="operator">:</span>
<span id="line578">578</span>               <span class="keyword">if</span> <span class="variable">run_test</span><span class="operator">(</span><span class="variable">function</span><span class="operator">,</span> <span class="variable">test_inputs</span><span class="operator">,</span> <span class="variable">expected_output</span><span class="operator">)</span><span class="operator">:</span>
<span id="line579">579</span>                   <span class="variable">success</span> <span class="operator">+=</span> <span class="number">1</span>
<span id="line580">580</span>               <span class="keyword">else</span><span class="operator">:</span>
<span id="line581">581</span>                   <span class="variable">fail</span> <span class="operator">+=</span> <span class="number">1</span>
<span id="line582">582</span>           <span class="keyword">return</span> <span class="variable">success</span><span class="operator">,</span> <span class="variable">fail</span>
<span id="line583">583</span>       
<span id="line584">584</span>       
<span id="line585">585</span>       <span class="keyword">def</span> <span class="variable">test_message_to_bits</span><span class="operator">(</span><span class="operator">)</span><span class="operator">:</span>
<span id="line586">586</span>           <span class="string">&quot;Test cases for the message_to_bits function&quot;</span>
<span id="line587">587</span>           <span class="variable">tests</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line588">588</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="string">&#x27;&#x27;</span><span class="operator">)</span><span class="operator">,</span>
<span id="line589">589</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;A&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="string">&#x27;01000001&#x27;</span><span class="operator">)</span><span class="operator">,</span>
<span id="line590">590</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;hello&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="string">&#x27;0110100001100101011011000110110001101111&#x27;</span><span class="operator">)</span><span class="operator">,</span>
<span id="line591">591</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;ABC\n123&#x27;</span><span class="operator">]</span><span class="operator">,</span>
<span id="line592">592</span>                <span class="string">&#x27;01000001010000100100001100001010001100010011001000110011&#x27;</span><span class="operator">)</span><span class="operator">,</span>
<span id="line593">593</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&quot;je t&#x27;aime&quot;</span><span class="operator">]</span><span class="operator">,</span>
<span id="line594">594</span>                <span class="string">&#x27;011010100110010100100000011101000&#x27;</span>
<span id="line595">595</span>                <span class="string">&#x27;010011101100001011010010110110101100101&#x27;</span><span class="operator">)</span>
<span id="line596">596</span>           <span class="operator">]</span>
<span id="line597">597</span>           <span class="keyword">return</span> <span class="variable">run_tests</span><span class="operator">(</span><span class="variable">message_to_bits</span><span class="operator">,</span> <span class="variable">tests</span><span class="operator">)</span>
<span id="line598">598</span>       
<span id="line599">599</span>       
<span id="line600">600</span>       <span class="keyword">def</span> <span class="variable">test_bits_to_message</span><span class="operator">(</span><span class="operator">)</span><span class="operator">:</span>
<span id="line601">601</span>           <span class="string">&quot;Test cases for the bits_to_message function&quot;</span>
<span id="line602">602</span>           <span class="variable">tests</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line603">603</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="string">&#x27;&#x27;</span><span class="operator">)</span><span class="operator">,</span>
<span id="line604">604</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;0100000&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="string">&#x27;&#x27;</span><span class="operator">)</span><span class="operator">,</span>
<span id="line605">605</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;01000001&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="string">&#x27;A&#x27;</span><span class="operator">)</span><span class="operator">,</span>
<span id="line606">606</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;011010000110010101&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="string">&#x27;he&#x27;</span><span class="operator">)</span><span class="operator">,</span>
<span id="line607">607</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;0110100001100101011011000110110001101111&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="string">&#x27;hello&#x27;</span><span class="operator">)</span><span class="operator">,</span>
<span id="line608">608</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;011010000110010101101100000000000110110001101111&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="string">&#x27;hel&#x27;</span><span class="operator">)</span><span class="operator">,</span>
<span id="line609">609</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;01000001010000100100001100001010001100010011001000110011&#x27;</span><span class="operator">]</span><span class="operator">,</span>
<span id="line610">610</span>                <span class="string">&#x27;ABC\n123&#x27;</span><span class="operator">)</span>
<span id="line611">611</span>           <span class="operator">]</span>
<span id="line612">612</span>           <span class="keyword">return</span> <span class="variable">run_tests</span><span class="operator">(</span><span class="variable">bits_to_message</span><span class="operator">,</span> <span class="variable">tests</span><span class="operator">)</span>
<span id="line613">613</span>       
<span id="line614">614</span>       
<span id="line615">615</span>       <span class="keyword">def</span> <span class="variable">round_trip</span><span class="operator">(</span><span class="variable">message</span><span class="operator">)</span><span class="operator">:</span>
<span id="line616">616</span>           <span class="string">&quot;Round trip on bits_to_message and message_to_bits&quot;</span>
<span id="line617">617</span>           <span class="keyword">return</span> <span class="variable">bits_to_message</span><span class="operator">(</span><span class="variable">message_to_bits</span><span class="operator">(</span><span class="variable">message</span><span class="operator">)</span><span class="operator">)</span> <span class="operator">==</span> <span class="variable">message</span>
<span id="line618">618</span>       
<span id="line619">619</span>       
<span id="line620">620</span>       <span class="keyword">def</span> <span class="variable">test_round_trip</span><span class="operator">(</span><span class="operator">)</span><span class="operator">:</span>
<span id="line621">621</span>           <span class="string">&quot;Test cases for round trip on bits_to_message and message_to_bits&quot;</span>
<span id="line622">622</span>           <span class="variable">tests</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line623">623</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="keyword">True</span><span class="operator">)</span><span class="operator">,</span>
<span id="line624">624</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;X&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="keyword">True</span><span class="operator">)</span><span class="operator">,</span>
<span id="line625">625</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;XX&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="keyword">True</span><span class="operator">)</span><span class="operator">,</span>
<span id="line626">626</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;XY&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="keyword">True</span><span class="operator">)</span><span class="operator">,</span>
<span id="line627">627</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;\t\n &#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="keyword">True</span><span class="operator">)</span><span class="operator">,</span>
<span id="line628">628</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;#!@~%^&amp;*(){}[]:;&quot;\&#x27;&lt;&gt;.,/?+=-_`&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="keyword">True</span><span class="operator">)</span>
<span id="line629">629</span>           <span class="operator">]</span>
<span id="line630">630</span>           <span class="keyword">return</span> <span class="variable">run_tests</span><span class="operator">(</span><span class="variable">round_trip</span><span class="operator">,</span> <span class="variable">tests</span><span class="operator">)</span>
<span id="line631">631</span>       
<span id="line632">632</span>       <span class="comment"># A small image for testing purposes</span>
<span id="line633">633</span>       <span class="variable">SMALL_TEST_IMAGE</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line634">634</span>           <span class="operator">[</span><span class="operator">(</span><span class="number">15</span><span class="operator">,</span> <span class="number">103</span><span class="operator">,</span> <span class="number">255</span><span class="operator">)</span><span class="operator">,</span> <span class="operator">(</span><span class="number">0</span><span class="operator">,</span> <span class="number">3</span><span class="operator">,</span> <span class="number">19</span><span class="operator">)</span><span class="operator">]</span><span class="operator">,</span>
<span id="line635">635</span>           <span class="operator">[</span><span class="operator">(</span><span class="number">22</span><span class="operator">,</span> <span class="number">200</span><span class="operator">,</span> <span class="number">1</span><span class="operator">)</span><span class="operator">,</span> <span class="operator">(</span><span class="number">8</span><span class="operator">,</span> <span class="number">8</span><span class="operator">,</span> <span class="number">8</span><span class="operator">)</span><span class="operator">]</span><span class="operator">,</span>
<span id="line636">636</span>           <span class="operator">[</span><span class="operator">(</span><span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">)</span><span class="operator">,</span> <span class="operator">(</span><span class="number">5</span><span class="operator">,</span> <span class="number">123</span><span class="operator">,</span> <span class="number">19</span><span class="operator">)</span><span class="operator">]</span>
<span id="line637">637</span>       <span class="operator">]</span>
<span id="line638">638</span>       
<span id="line639">639</span>       <span class="comment"># The small test image with a messsage &quot;he&quot; encoded</span>
<span id="line640">640</span>       <span class="comment"># within it.</span>
<span id="line641">641</span>       <span class="variable">SMALL_TEST_IMAGE_ENCODED</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line642">642</span>           <span class="operator">[</span><span class="operator">(</span><span class="number">14</span><span class="operator">,</span> <span class="number">103</span><span class="operator">,</span> <span class="number">255</span><span class="operator">)</span><span class="operator">,</span> <span class="operator">(</span><span class="number">0</span><span class="operator">,</span> <span class="number">3</span><span class="operator">,</span> <span class="number">18</span><span class="operator">)</span><span class="operator">]</span><span class="operator">,</span>
<span id="line643">643</span>           <span class="operator">[</span><span class="operator">(</span><span class="number">22</span><span class="operator">,</span> <span class="number">200</span><span class="operator">,</span> <span class="number">0</span><span class="operator">)</span><span class="operator">,</span> <span class="operator">(</span><span class="number">9</span><span class="operator">,</span> <span class="number">9</span><span class="operator">,</span> <span class="number">8</span><span class="operator">)</span><span class="operator">]</span><span class="operator">,</span>
<span id="line644">644</span>           <span class="operator">[</span><span class="operator">(</span><span class="number">0</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">0</span><span class="operator">)</span><span class="operator">,</span> <span class="operator">(</span><span class="number">5</span><span class="operator">,</span> <span class="number">122</span><span class="operator">,</span> <span class="number">19</span><span class="operator">)</span><span class="operator">]</span>
<span id="line645">645</span>       <span class="operator">]</span>
<span id="line646">646</span>       
<span id="line647">647</span>       
<span id="line648">648</span>       <span class="keyword">def</span> <span class="variable">test_encode_small</span><span class="operator">(</span><span class="operator">)</span><span class="operator">:</span>
<span id="line649">649</span>           <span class="string">&quot;Test cases for the encode function on the small test image.&quot;</span>
<span id="line650">650</span>           <span class="variable">tests</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line651">651</span>               <span class="operator">(</span><span class="operator">[</span><span class="variable">SMALL_TEST_IMAGE</span><span class="operator">,</span> <span class="string">&#x27;hello&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="variable">SMALL_TEST_IMAGE_ENCODED</span><span class="operator">)</span>
<span id="line652">652</span>           <span class="operator">]</span>
<span id="line653">653</span>           <span class="keyword">return</span> <span class="variable">run_tests</span><span class="operator">(</span><span class="variable">encode</span><span class="operator">,</span> <span class="variable">tests</span><span class="operator">)</span>
<span id="line654">654</span>       
<span id="line655">655</span>       
<span id="line656">656</span>       <span class="keyword">def</span> <span class="variable">test_decode_small</span><span class="operator">(</span><span class="operator">)</span><span class="operator">:</span>
<span id="line657">657</span>           <span class="string">&quot;Test cases for the decode function on the small test image.&quot;</span>
<span id="line658">658</span>           <span class="variable">tests</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line659">659</span>               <span class="operator">(</span><span class="operator">[</span><span class="variable">SMALL_TEST_IMAGE_ENCODED</span><span class="operator">]</span><span class="operator">,</span> <span class="string">&#x27;he&#x27;</span><span class="operator">)</span>
<span id="line660">660</span>           <span class="operator">]</span>
<span id="line661">661</span>           <span class="keyword">return</span> <span class="variable">run_tests</span><span class="operator">(</span><span class="variable">decode</span><span class="operator">,</span> <span class="variable">tests</span><span class="operator">)</span>
<span id="line662">662</span>       
<span id="line663">663</span>       
<span id="line664">664</span>       <span class="comment"># We should add test cases where the message is larger than</span>
<span id="line665">665</span>       <span class="comment"># the image,</span>
<span id="line666">666</span>       <span class="keyword">def</span> <span class="variable">test_encode_decode_file</span><span class="operator">(</span><span class="operator">)</span><span class="operator">:</span>
<span id="line667">667</span>           <span class="string">&quot;Test cases for encode and decode from an image file.&quot;</span>
<span id="line668">668</span>           <span class="keyword">def</span> <span class="variable">encode_decode_file</span><span class="operator">(</span><span class="variable">filename</span><span class="operator">,</span> <span class="variable">message</span><span class="operator">)</span><span class="operator">:</span>
<span id="line669">669</span>               <span class="variable">image</span> <span class="operator">=</span> <span class="variable">read_image</span><span class="operator">(</span><span class="variable">filename</span><span class="operator">)</span>
<span id="line670">670</span>               <span class="variable">encoded_image</span> <span class="operator">=</span> <span class="variable">encode</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">message</span><span class="operator">)</span>
<span id="line671">671</span>               <span class="variable">decoded_message</span> <span class="operator">=</span> <span class="variable">decode</span><span class="operator">(</span><span class="variable">encoded_image</span><span class="operator">)</span>
<span id="line672">672</span>               <span class="keyword">return</span> <span class="variable">decoded_message</span>
<span id="line673">673</span>           <span class="variable">tests</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line674">674</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;floyd.png&#x27;</span><span class="operator">,</span> <span class="string">&#x27;Floyd is cute!&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="string">&#x27;Floyd is cute!&#x27;</span><span class="operator">)</span><span class="operator">,</span>
<span id="line675">675</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;floyd.png&#x27;</span><span class="operator">,</span> <span class="string">&#x27;&#x27;</span><span class="operator">]</span><span class="operator">,</span> <span class="string">&#x27;&#x27;</span><span class="operator">)</span>
<span id="line676">676</span>           <span class="operator">]</span>
<span id="line677">677</span>           <span class="keyword">return</span> <span class="variable">run_tests</span><span class="operator">(</span><span class="variable">encode_decode_file</span><span class="operator">,</span> <span class="variable">tests</span><span class="operator">)</span>
<span id="line678">678</span>       
<span id="line679">679</span>       
<span id="line680">680</span>       <span class="comment"># We should add test cases where the message is larger than</span>
<span id="line681">681</span>       <span class="comment"># the image,</span>
<span id="line682">682</span>       <span class="keyword">def</span> <span class="variable">test_encode_decode_ext_file</span><span class="operator">(</span><span class="operator">)</span><span class="operator">:</span>
<span id="line683">683</span>           <span class="string">&quot;Test cases for encode_ext and decode_ext from an image file.&quot;</span>
<span id="line684">684</span>           <span class="keyword">def</span> <span class="variable">encode_decode_ext_file</span><span class="operator">(</span><span class="variable">filename</span><span class="operator">,</span> <span class="variable">message</span><span class="operator">,</span> <span class="variable">num_bits</span><span class="operator">)</span><span class="operator">:</span>
<span id="line685">685</span>               <span class="variable">image</span> <span class="operator">=</span> <span class="variable">read_image</span><span class="operator">(</span><span class="variable">filename</span><span class="operator">)</span>
<span id="line686">686</span>               <span class="variable">encoded_image</span> <span class="operator">=</span> <span class="variable">encode_ext</span><span class="operator">(</span><span class="variable">image</span><span class="operator">,</span> <span class="variable">message</span><span class="operator">,</span> <span class="variable">num_bits</span><span class="operator">)</span>
<span id="line687">687</span>               <span class="variable">decoded_message</span> <span class="operator">=</span> <span class="variable">decode_ext</span><span class="operator">(</span><span class="variable">encoded_image</span><span class="operator">,</span> <span class="variable">num_bits</span><span class="operator">)</span>
<span id="line688">688</span>               <span class="keyword">return</span> <span class="variable">decoded_message</span>
<span id="line689">689</span>           <span class="variable">tests</span> <span class="operator">=</span> <span class="operator">[</span>
<span id="line690">690</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;floyd.png&#x27;</span><span class="operator">,</span> <span class="string">&#x27;Floyd is cute!&#x27;</span><span class="operator">,</span> <span class="number">2</span><span class="operator">]</span><span class="operator">,</span> <span class="string">&#x27;Floyd is cute!&#x27;</span><span class="operator">)</span><span class="operator">,</span>
<span id="line691">691</span>               <span class="operator">(</span><span class="operator">[</span><span class="string">&#x27;floyd.png&#x27;</span><span class="operator">,</span> <span class="string">&#x27;Floyd is cute!&#x27;</span><span class="operator">,</span> <span class="number">8</span><span class="operator">]</span><span class="operator">,</span> <span class="string">&#x27;Floyd is cute!&#x27;</span><span class="operator">)</span><span class="operator">,</span>
<span id="line692">692</span>           <span class="operator">]</span>
<span id="line693">693</span>           <span class="keyword">return</span> <span class="variable">run_tests</span><span class="operator">(</span><span class="variable">encode_decode_ext_file</span><span class="operator">,</span> <span class="variable">tests</span><span class="operator">)</span>
</code></pre>
           </div>
    </body>
</html>

